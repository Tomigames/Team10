{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Brendon Nguyen\\\\Desktop\\\\T10Code\\\\Team10\\\\GradeView_Course\\\\frontend\\\\src\\\\App.jsx\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$(),\n  _s3 = $RefreshSig$(),\n  _s4 = $RefreshSig$(),\n  _s5 = $RefreshSig$(),\n  _s6 = $RefreshSig$(),\n  _s7 = $RefreshSig$(),\n  _s8 = $RefreshSig$(),\n  _s9 = $RefreshSig$();\n// src/App.js\nimport React, { useState, useEffect, createContext, useContext, useCallback, useRef, useMemo } from 'react';\nimport { BrowserRouter, Routes, Route, Navigate, useNavigate, useParams } from 'react-router-dom';\nimport axios from 'axios';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { ChevronDown, ChevronUp } from 'lucide-react';\nimport WeightEditor from './components/WeightEditor';\nimport AssessmentList from './components/AssessmentList';\nimport { calculateSectionAverage, calculateOverallGrade, getGradeColor } from './utils/gradeCalculations';\nimport { jsPDF } from \"jspdf\";\nimport TranscriptDownloader from './components/TranscriptDownloader';\n\n/* ------------ Context & ProtectedRoute ------------ */\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const UserContext = /*#__PURE__*/createContext(null);\nconst UserProvider = ({\n  children\n}) => {\n  _s();\n  const [userId, setUserId] = useState(1); // Default to user ID 1\n  useEffect(() => {\n    const stored = localStorage.getItem('userId');\n    if (stored) setUserId(+stored);else {\n      // Set default user ID to 1 and store in localStorage\n      localStorage.setItem('userId', 1);\n    }\n  }, []);\n  const updateUser = id => {\n    localStorage.setItem('userId', id);\n    setUserId(id);\n  };\n  return /*#__PURE__*/_jsxDEV(UserContext.Provider, {\n    value: {\n      userId,\n      updateUser\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 29,\n    columnNumber: 10\n  }, this);\n};\n_s(UserProvider, \"6S5gesFbrWVa+0WZkcU7MTUhq4Q=\");\n_c = UserProvider;\nconst ProtectedRoute = ({\n  children\n}) => {\n  _s2();\n  const {\n    userId\n  } = useContext(UserContext);\n  return userId ? children : /*#__PURE__*/_jsxDEV(Navigate, {\n    to: \"/login\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 33,\n    columnNumber: 30\n  }, this);\n};\n\n/* ------------ API Helper ------------ */\n_s2(ProtectedRoute, \"f1xc73H04AOIcBBBtmriXwWn3kM=\");\n_c2 = ProtectedRoute;\nexport const api = axios.create({\n  baseURL: process.env.REACT_APP_API_BASE || 'http://localhost:5000',\n  headers: {\n    'Content-Type': 'application/json'\n  }\n});\n\n/* ------------ Login Page ------------ */\nfunction LoginPage() {\n  _s3();\n  const [u, setU] = useState(''),\n    [p, setP] = useState(''),\n    [err, setErr] = useState('');\n  const {\n    updateUser\n  } = useContext(UserContext);\n  const nav = useNavigate();\n  const submit = e => {\n    e.preventDefault();\n    if (u === 'testuser' && p === 'password') {\n      updateUser(1);\n      nav('/home');\n    } else {\n      setErr('Invalid username or password');\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container mt-5\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"card mx-auto\",\n      style: {\n        maxWidth: 400\n      },\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"card-body\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"card-title text-center\",\n          children: \"Login\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 11\n        }, this), err && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"alert alert-danger\",\n          children: err\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 19\n        }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n          onSubmit: submit,\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mb-3\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"form-label\",\n              children: \"Username\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 64,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              value: u,\n              onChange: e => setU(e.target.value),\n              className: \"form-control\",\n              required: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 65,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 63,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mb-3\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"form-label\",\n              children: \"Password\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 68,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"password\",\n              value: p,\n              onChange: e => setP(e.target.value),\n              className: \"form-control\",\n              required: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 69,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 67,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"submit\",\n            className: \"btn btn-primary w-100\",\n            children: \"Login\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 71,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 57,\n    columnNumber: 5\n  }, this);\n}\n\n/* ------------ Home Page ------------ */\n_s3(LoginPage, \"14nnJnbBkWy4TVbiO4veHiHiqtY=\", false, function () {\n  return [useNavigate];\n});\n_c3 = LoginPage;\nfunction HomePage() {\n  _s4();\n  const nav = useNavigate();\n  const {\n    userId\n  } = useContext(UserContext);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container mt-5 text-center\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Welcome to GradeView\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"d-flex justify-content-center gap-3\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"btn btn-primary m-2\",\n        onClick: () => nav('/courses'),\n        children: \"View Courses\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(TranscriptDownloader, {\n        userId: userId\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 85,\n    columnNumber: 5\n  }, this);\n}\n\n/* ------------ Course Listing & Details ------------ */\n_s4(HomePage, \"Iu3sL3mHuy/jMHvrj4hteRRCf28=\", false, function () {\n  return [useNavigate];\n});\n_c4 = HomePage;\nconst AssessmentItem = ({\n  a\n}) => /*#__PURE__*/_jsxDEV(\"div\", {\n  className: \"assessment-item\",\n  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n    children: [a.AssessmentName, \":\"]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 100,\n    columnNumber: 5\n  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n    children: a.IndividualGrade != null ? `${a.IndividualGrade}%` : 'N/A'\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 101,\n    columnNumber: 5\n  }, this)]\n}, void 0, true, {\n  fileName: _jsxFileName,\n  lineNumber: 99,\n  columnNumber: 3\n}, this);\n_c5 = AssessmentItem;\nconst WeightSection = ({\n  courseId,\n  weightId,\n  weightPercentage,\n  assessmentType,\n  assessments = [],\n  onWeightUpdate\n}) => {\n  _s5();\n  const {\n    userId\n  } = useContext(UserContext);\n  const [editing, setEditing] = useState(false);\n  const [currentWeight, setCurrentWeight] = useState(weightPercentage);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState('');\n  const lastRefreshTime = useRef(0);\n\n  // Update currentWeight when weightPercentage prop changes\n  useEffect(() => {\n    console.log('WeightSection: weightPercentage prop changed', {\n      courseId,\n      weightId,\n      assessmentType,\n      weightPercentage\n    });\n    setCurrentWeight(weightPercentage);\n  }, [weightPercentage, courseId, weightId, assessmentType]);\n\n  // Calculate section average\n  const sectionAverage = useMemo(() => {\n    const avg = calculateSectionAverage(assessments);\n    // Ensure the result is a number\n    return isNaN(avg) ? 0 : avg;\n  }, [assessments]);\n  const handleWeightUpdate = async newWeight => {\n    setCurrentWeight(newWeight);\n    onWeightUpdate(newWeight);\n\n    // Trigger a refresh of the course data\n    const now = Date.now();\n    if (now - lastRefreshTime.current > 1000) {\n      lastRefreshTime.current = now;\n      const event = new CustomEvent('refreshCourse', {\n        detail: {\n          courseId\n        }\n      });\n      window.dispatchEvent(event);\n\n      // Also trigger a refresh of the course list to update the overall grade\n      const courseListEvent = new CustomEvent('refreshCourseList');\n      window.dispatchEvent(courseListEvent);\n    }\n  };\n  const handleAssessmentChange = () => {\n    // Only refresh if it's been more than 1 second since the last refresh\n    const now = Date.now();\n    if (now - lastRefreshTime.current > 1000) {\n      lastRefreshTime.current = now;\n      const event = new CustomEvent('refreshCourse', {\n        detail: {\n          courseId\n        }\n      });\n      window.dispatchEvent(event);\n\n      // Also trigger a refresh of the course list to update the overall grade\n      const courseListEvent = new CustomEvent('refreshCourseList');\n      window.dispatchEvent(courseListEvent);\n    }\n  };\n  const handleSave = async () => {\n    // Don't close the editor after saving\n    // This allows the user to see the updated weight and continue editing if needed\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"weight-section\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"weight-header\",\n      onClick: () => !editing && setEditing(true),\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"weight-info\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"weight-type\",\n          children: assessmentType\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 174,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"weight-percentage\",\n          children: [\"(\", currentWeight, \"%)\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 175,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"section-average\",\n          children: [\"Average: \", typeof sectionAverage === 'number' ? sectionAverage.toFixed(1) : '0.0', \"%\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 176,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"weight-actions\",\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"edit-weight-button\",\n          onClick: () => setEditing(true),\n          children: \"Edit\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 179,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 7\n    }, this), editing && /*#__PURE__*/_jsxDEV(WeightEditor, {\n      courseId: courseId,\n      weightId: weightId,\n      assessmentType: assessmentType,\n      weightPercentage: currentWeight,\n      onSave: handleSave,\n      onCancel: () => setEditing(false),\n      onWeightUpdate: handleWeightUpdate\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(AnimatePresence, {\n      children: editing && /*#__PURE__*/_jsxDEV(motion.div, {\n        initial: {\n          height: 0,\n          opacity: 0\n        },\n        animate: {\n          height: 'auto',\n          opacity: 1\n        },\n        exit: {\n          height: 0,\n          opacity: 0\n        },\n        className: \"assessment-list\",\n        children: /*#__PURE__*/_jsxDEV(AssessmentList, {\n          courseId: courseId,\n          weightId: weightId,\n          assessmentType: assessmentType,\n          assessments: assessments,\n          onAssessmentChange: handleAssessmentChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 205,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 199,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 197,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 171,\n    columnNumber: 5\n  }, this);\n};\n_s5(WeightSection, \"4OXqaxskqv2dridS4SHEFgBEKbo=\");\n_c6 = WeightSection;\nconst CourseItem = ({\n  c,\n  onDelete,\n  onEdit\n}) => {\n  _s6();\n  const [open, setOpen] = useState(false);\n  const [assessments, setAssessments] = useState([]);\n  const [weights, setWeights] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState('');\n  const {\n    userId\n  } = useContext(UserContext);\n  const fetchRef = useRef();\n  const [initialFetchDone, setInitialFetchDone] = useState(false);\n  const fetchAssessments = useCallback(async () => {\n    setLoading(true);\n    try {\n      // Fetch assessments\n      console.log('CourseItem: Fetching assessments', {\n        courseId: c.CourseID,\n        courseName: c.CourseName\n      });\n      const assessmentsResponse = await api.get(`/api/courses/${c.CourseID}/assessments`, {\n        headers: {\n          'x-user-id': userId\n        }\n      });\n      console.log('CourseItem: Assessments fetched', {\n        courseId: c.CourseID,\n        courseName: c.CourseName,\n        assessmentCount: assessmentsResponse.data.length\n      });\n      setAssessments(assessmentsResponse.data);\n\n      // Fetch weights\n      console.log('CourseItem: Fetching weights', {\n        courseId: c.CourseID,\n        courseName: c.CourseName\n      });\n      const weightsResponse = await api.get(`/api/courses/${c.CourseID}/weights`, {\n        headers: {\n          'x-user-id': userId\n        }\n      });\n      console.log('CourseItem: Weights fetched', {\n        courseId: c.CourseID,\n        courseName: c.CourseName,\n        weightCount: weightsResponse.data.length,\n        weights: weightsResponse.data\n      });\n      setWeights(weightsResponse.data);\n      setError('');\n    } catch (err) {\n      console.error('Error fetching course data:', err);\n      setError('Failed to load course data');\n    } finally {\n      setLoading(false);\n    }\n  }, [c.CourseID, userId]);\n\n  // Store the fetch function in a ref\n  useEffect(() => {\n    fetchRef.current = fetchAssessments;\n  }, [fetchAssessments]);\n\n  // Initial fetch when component mounts\n  useEffect(() => {\n    if (!initialFetchDone) {\n      console.log('CourseItem: Initial fetch', {\n        courseId: c.CourseID,\n        courseName: c.CourseName\n      });\n      fetchAssessments();\n      setInitialFetchDone(true);\n    }\n  }, [fetchAssessments, initialFetchDone, c.CourseID, c.CourseName]);\n\n  // Add event listener for course refresh\n  useEffect(() => {\n    const handleRefresh = event => {\n      if (event.detail.courseId === c.CourseID) {\n        console.log('Course refresh event received:', {\n          courseId: c.CourseID,\n          preserveOpenState: event.detail.preserveOpenState\n        });\n\n        // Only fetch assessments if the course is open or if preserveOpenState is true\n        if (open || event.detail.preserveOpenState) {\n          fetchAssessments();\n        }\n      }\n    };\n    window.addEventListener('refreshCourse', handleRefresh);\n    return () => window.removeEventListener('refreshCourse', handleRefresh);\n  }, [c.CourseID, open]);\n\n  // Group assessments by weight type\n  const groupedAssessments = useMemo(() => {\n    const groups = {};\n    assessments.forEach(assessment => {\n      if (!groups[assessment.WeightID]) {\n        // Find the corresponding weight from the weights array\n        const weight = weights.find(w => w.id === assessment.WeightID);\n        groups[assessment.WeightID] = {\n          weightType: weight ? weight.assessmentType : assessment.AssessmentType,\n          weightPercentage: weight ? weight.currentWeight : assessment.WeightPercentage,\n          weightId: assessment.WeightID,\n          courseId: c.CourseID,\n          assessments: []\n        };\n      }\n      groups[assessment.WeightID].assessments.push(assessment);\n    });\n    return Object.values(groups);\n  }, [assessments, weights, c.CourseID]);\n\n  // Calculate overall grade\n  const overallGrade = useMemo(() => {\n    if (weights.length === 0 || assessments.length === 0) return c.OverallGrade || 0;\n\n    // Map the weights to the expected format\n    const mappedWeights = weights.map(w => ({\n      WeightID: w.id,\n      AssessmentType: w.assessmentType,\n      WeightPercentage: w.currentWeight\n    }));\n    const courseData = {\n      weights: mappedWeights,\n      assessments\n    };\n    const calculatedGrade = calculateOverallGrade(courseData);\n    // Ensure the result is a number\n    const result = isNaN(calculatedGrade) ? 0 : calculatedGrade;\n\n    // Log the grade change\n    console.log(`Course ${c.CourseName} (ID: ${c.CourseID}) grade updated:`, {\n      previousGrade: c.OverallGrade || 0,\n      newGrade: result,\n      weights: mappedWeights.map(w => ({\n        type: w.AssessmentType,\n        percentage: w.WeightPercentage\n      })),\n      assessmentCount: assessments.length\n    });\n    return result;\n  }, [weights, assessments, c.OverallGrade, c.CourseID, c.CourseName]);\n\n  // Get grade color\n  const gradeColorClass = useMemo(() => {\n    return getGradeColor(overallGrade);\n  }, [overallGrade]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"course-item\",\n    \"data-course-id\": c.CourseID,\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"course-header\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"course-details\",\n        onClick: () => setOpen(o => !o),\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"course-name\",\n          children: c.CourseName\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 369,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"instructor\",\n          children: c.Instructor\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 370,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 368,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"header-actions\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"edit-button\",\n          onClick: () => onEdit(c.CourseID),\n          children: \"Edit\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 373,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"delete-button\",\n          onClick: () => onDelete(c.UserID, c.CourseID),\n          children: \"Delete\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 374,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 372,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: `grade ${gradeColorClass}`,\n        children: typeof overallGrade === 'number' ? overallGrade.toFixed(1) : '0.0'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 376,\n        columnNumber: 9\n      }, this), open ? /*#__PURE__*/_jsxDEV(ChevronUp, {\n        onClick: () => setOpen(false)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 379,\n        columnNumber: 17\n      }, this) : /*#__PURE__*/_jsxDEV(ChevronDown, {\n        onClick: () => setOpen(true)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 379,\n        columnNumber: 64\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 367,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(AnimatePresence, {\n      children: open && /*#__PURE__*/_jsxDEV(motion.div, {\n        initial: {\n          height: 0,\n          opacity: 0\n        },\n        animate: {\n          height: 'auto',\n          opacity: 1\n        },\n        exit: {\n          height: 0,\n          opacity: 0\n        },\n        className: \"course-dropdown\",\n        children: loading ? /*#__PURE__*/_jsxDEV(\"div\", {\n          children: \"Loading...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 390,\n          columnNumber: 15\n        }, this) : groupedAssessments.length > 0 ? groupedAssessments.map((g, i) => /*#__PURE__*/_jsxDEV(WeightSection, {\n          courseId: g.courseId,\n          weightId: g.weightId,\n          weightPercentage: g.weightPercentage,\n          assessmentType: g.weightType,\n          assessments: g.assessments,\n          onWeightUpdate: newWeight => {\n            // Dispatch a refresh event to update the course data\n            const event = new CustomEvent('refreshCourse', {\n              detail: {\n                courseId: g.courseId\n              }\n            });\n            window.dispatchEvent(event);\n          }\n        }, i, false, {\n          fileName: _jsxFileName,\n          lineNumber: 393,\n          columnNumber: 17\n        }, this)) : /*#__PURE__*/_jsxDEV(\"div\", {\n          children: \"No assessments.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 410,\n          columnNumber: 15\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 383,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 381,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 366,\n    columnNumber: 5\n  }, this);\n};\n_s6(CourseItem, \"WLCnYV2taEabx0za/5+xaJOTazA=\");\n_c7 = CourseItem;\nfunction CourseList() {\n  _s7();\n  const [courses, setCourses] = useState([]);\n  const [sem, setSem] = useState('All'),\n    [yr, setYr] = useState('All');\n  const [openSem, setOpenSem] = useState(false),\n    [openYr, setOpenYr] = useState(false);\n  const {\n    userId\n  } = useContext(UserContext);\n  const nav = useNavigate();\n  const fetch = () => {\n    const qs = [];\n    if (sem !== 'All') qs.push(`semester=${sem}`);\n    if (yr !== 'All') qs.push(`year=${yr}`);\n    if (userId) qs.push(`userId=${userId}`);\n    console.log('Fetching course data...');\n    api.get(`/${qs.length ? `?${qs.join('&')}` : ''}`).then(r => {\n      console.log('Course data fetched:', r.data.map(c => ({\n        courseId: c.CourseID,\n        courseName: c.CourseName,\n        overallGrade: c.OverallGrade\n      })));\n      setCourses(r.data);\n    });\n  };\n  useEffect(fetch, [sem, yr, userId]);\n\n  // Add event listener for refreshCourseList event\n  useEffect(() => {\n    const handleRefreshCourseList = () => {\n      console.log('refreshCourseList event received, refreshing course data');\n      fetch();\n    };\n    window.addEventListener('refreshCourseList', handleRefreshCourseList);\n    return () => window.removeEventListener('refreshCourseList', handleRefreshCourseList);\n  }, []);\n  const unique = (field, all) => ['All', ...Array.from(new Set(all.map(c => c[field])))];\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"course-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"header\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: `semester-dropdown ${openSem ? 'open' : ''}`,\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"semester-button\",\n          onClick: () => setOpenSem(o => !o),\n          children: [sem, \" v\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 460,\n          columnNumber: 11\n        }, this), openSem && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"dropdown-content\",\n          children: unique('Semester', courses).map(s => /*#__PURE__*/_jsxDEV(\"button\", {\n            className: s === sem ? 'active' : '',\n            onClick: () => {\n              setSem(s);\n              setOpenSem(false);\n            },\n            children: s\n          }, s, false, {\n            fileName: _jsxFileName,\n            lineNumber: 462,\n            columnNumber: 48\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 461,\n          columnNumber: 23\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 459,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: `semester-download ${openYr ? 'open' : ''}`,\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"download-button\",\n          onClick: () => setOpenYr(o => !o),\n          children: [yr, \" v\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 466,\n          columnNumber: 11\n        }, this), openYr && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"dropdown-content\",\n          children: unique('Year', courses).map(y => /*#__PURE__*/_jsxDEV(\"button\", {\n            className: y === yr ? 'active' : '',\n            onClick: () => {\n              setYr(y);\n              setOpenYr(false);\n            },\n            children: y\n          }, y, false, {\n            fileName: _jsxFileName,\n            lineNumber: 468,\n            columnNumber: 44\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 467,\n          columnNumber: 22\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 465,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"add-button\",\n        onClick: () => nav('/create'),\n        children: \"Add Course\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 471,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 458,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"course-list\",\n      children: courses.map(c => /*#__PURE__*/_jsxDEV(CourseItem, {\n        c: c,\n        onDelete: (u, id) => api.delete(`/course/${id}`, {\n          data: {\n            UserID: userId\n          }\n        }).then(fetch),\n        onEdit: id => nav(`/edit/${id}`)\n      }, c.CourseID, false, {\n        fileName: _jsxFileName,\n        lineNumber: 475,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 473,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 457,\n    columnNumber: 5\n  }, this);\n}\n\n/* ------------ Create & Edit Pages ------------ */\n_s7(CourseList, \"X+jgPIWKlMulUwQ9B0meU6Ne9KQ=\", false, function () {\n  return [useNavigate];\n});\n_c8 = CourseList;\nfunction CreateCourse() {\n  _s8();\n  const [form, setForm] = useState({\n    CourseName: '',\n    Instructor: '',\n    Semester: '',\n    Year: '',\n    CreditHours: ''\n  });\n  const {\n    userId\n  } = useContext(UserContext);\n  const nav = useNavigate();\n  const change = e => setForm(f => ({\n    ...f,\n    [e.target.name]: e.target.value\n  }));\n  const submit = e => {\n    e.preventDefault();\n    api.post('/course', {\n      ...form,\n      UserId: userId\n    }).then(() => nav('/courses'));\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container mt-5\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Create Course\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 497,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: submit,\n      children: [['CourseName', 'Instructor', 'Semester', 'Year', 'CreditHours'].map(field => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mb-3\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"form-label\",\n          children: field\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 501,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          name: field,\n          type: field === 'CreditHours' ? 'number' : 'text',\n          className: \"form-control\",\n          value: form[field],\n          onChange: change,\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 502,\n          columnNumber: 13\n        }, this)]\n      }, field, true, {\n        fileName: _jsxFileName,\n        lineNumber: 500,\n        columnNumber: 11\n      }, this)), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"btn btn-primary\",\n        children: \"Create\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 511,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        className: \"btn btn-secondary ms-2\",\n        onClick: () => nav('/courses'),\n        children: \"Cancel\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 512,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 498,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 496,\n    columnNumber: 5\n  }, this);\n}\n_s8(CreateCourse, \"nYlpPX2NllIFdJ8il6tceMdSkXQ=\", false, function () {\n  return [useNavigate];\n});\n_c9 = CreateCourse;\nfunction EditCourse() {\n  _s9();\n  const {\n    id\n  } = useParams();\n  const {\n    userId\n  } = useContext(UserContext);\n  const [form, setForm] = useState({});\n  const [loading, setLoading] = useState(true);\n  const nav = useNavigate();\n  useEffect(() => {\n    api.get(`/course/${id}?userId=${userId}`).then(r => setForm(r.data)).finally(() => setLoading(false));\n  }, [id, userId]);\n  const change = e => setForm(f => ({\n    ...f,\n    [e.target.name]: e.target.value\n  }));\n  const submit = e => {\n    e.preventDefault();\n    api.put(`/course/${id}`, {\n      ...form,\n      UserID: userId\n    }).then(() => nav('/courses'));\n  };\n  if (loading) return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: \"Loading...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 533,\n    columnNumber: 23\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container mt-5\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Edit Course\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 536,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: submit,\n      children: [['CourseName', 'Instructor', 'Semester', 'Year', 'CreditHours'].map(field => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mb-3\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"form-label\",\n          children: field\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 540,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          name: field,\n          type: field === 'CreditHours' ? 'number' : 'text',\n          className: \"form-control\",\n          value: form[field] || '',\n          onChange: change,\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 541,\n          columnNumber: 13\n        }, this)]\n      }, field, true, {\n        fileName: _jsxFileName,\n        lineNumber: 539,\n        columnNumber: 11\n      }, this)), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"btn btn-primary\",\n        children: \"Save\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 550,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        className: \"btn btn-secondary ms-2\",\n        onClick: () => nav('/courses'),\n        children: \"Cancel\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 551,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 537,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 535,\n    columnNumber: 5\n  }, this);\n}\n\n/* ------------ App & Routing ------------ */\n_s9(EditCourse, \"/JC+j5CLVZIztyAup99f2yfDtf0=\", false, function () {\n  return [useParams, useNavigate];\n});\n_c10 = EditCourse;\nexport default function App() {\n  return /*#__PURE__*/_jsxDEV(UserProvider, {\n    children: /*#__PURE__*/_jsxDEV(BrowserRouter, {\n      children: /*#__PURE__*/_jsxDEV(Routes, {\n        children: [/*#__PURE__*/_jsxDEV(Route, {\n          path: \"/login\",\n          element: /*#__PURE__*/_jsxDEV(LoginPage, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 563,\n            columnNumber: 41\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 563,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Route, {\n          path: \"/home\",\n          element: /*#__PURE__*/_jsxDEV(ProtectedRoute, {\n            children: /*#__PURE__*/_jsxDEV(HomePage, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 564,\n              columnNumber: 56\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 564,\n            columnNumber: 40\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 564,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Route, {\n          path: \"/courses\",\n          element: /*#__PURE__*/_jsxDEV(ProtectedRoute, {\n            children: /*#__PURE__*/_jsxDEV(CourseList, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 565,\n              columnNumber: 59\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 565,\n            columnNumber: 43\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 565,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Route, {\n          path: \"/create\",\n          element: /*#__PURE__*/_jsxDEV(ProtectedRoute, {\n            children: /*#__PURE__*/_jsxDEV(CreateCourse, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 566,\n              columnNumber: 58\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 566,\n            columnNumber: 42\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 566,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Route, {\n          path: \"/edit/:id\",\n          element: /*#__PURE__*/_jsxDEV(ProtectedRoute, {\n            children: /*#__PURE__*/_jsxDEV(EditCourse, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 567,\n              columnNumber: 60\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 567,\n            columnNumber: 44\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 567,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Route, {\n          path: \"*\",\n          element: /*#__PURE__*/_jsxDEV(Navigate, {\n            to: \"/home\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 568,\n            columnNumber: 36\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 568,\n          columnNumber: 11\n        }, this), \" \"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 562,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 561,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 560,\n    columnNumber: 5\n  }, this);\n}\n_c11 = App;\nvar _c, _c2, _c3, _c4, _c5, _c6, _c7, _c8, _c9, _c10, _c11;\n$RefreshReg$(_c, \"UserProvider\");\n$RefreshReg$(_c2, \"ProtectedRoute\");\n$RefreshReg$(_c3, \"LoginPage\");\n$RefreshReg$(_c4, \"HomePage\");\n$RefreshReg$(_c5, \"AssessmentItem\");\n$RefreshReg$(_c6, \"WeightSection\");\n$RefreshReg$(_c7, \"CourseItem\");\n$RefreshReg$(_c8, \"CourseList\");\n$RefreshReg$(_c9, \"CreateCourse\");\n$RefreshReg$(_c10, \"EditCourse\");\n$RefreshReg$(_c11, \"App\");","map":{"version":3,"names":["React","useState","useEffect","createContext","useContext","useCallback","useRef","useMemo","BrowserRouter","Routes","Route","Navigate","useNavigate","useParams","axios","motion","AnimatePresence","ChevronDown","ChevronUp","WeightEditor","AssessmentList","calculateSectionAverage","calculateOverallGrade","getGradeColor","jsPDF","TranscriptDownloader","jsxDEV","_jsxDEV","UserContext","UserProvider","children","_s","userId","setUserId","stored","localStorage","getItem","setItem","updateUser","id","Provider","value","fileName","_jsxFileName","lineNumber","columnNumber","_c","ProtectedRoute","_s2","to","_c2","api","create","baseURL","process","env","REACT_APP_API_BASE","headers","LoginPage","_s3","u","setU","p","setP","err","setErr","nav","submit","e","preventDefault","className","style","maxWidth","onSubmit","onChange","target","required","type","_c3","HomePage","_s4","onClick","_c4","AssessmentItem","a","AssessmentName","IndividualGrade","_c5","WeightSection","courseId","weightId","weightPercentage","assessmentType","assessments","onWeightUpdate","_s5","editing","setEditing","currentWeight","setCurrentWeight","loading","setLoading","error","setError","lastRefreshTime","console","log","sectionAverage","avg","isNaN","handleWeightUpdate","newWeight","now","Date","current","event","CustomEvent","detail","window","dispatchEvent","courseListEvent","handleAssessmentChange","handleSave","toFixed","onSave","onCancel","div","initial","height","opacity","animate","exit","onAssessmentChange","_c6","CourseItem","c","onDelete","onEdit","_s6","open","setOpen","setAssessments","weights","setWeights","fetchRef","initialFetchDone","setInitialFetchDone","fetchAssessments","CourseID","courseName","CourseName","assessmentsResponse","get","assessmentCount","data","length","weightsResponse","weightCount","handleRefresh","preserveOpenState","addEventListener","removeEventListener","groupedAssessments","groups","forEach","assessment","WeightID","weight","find","w","weightType","AssessmentType","WeightPercentage","push","Object","values","overallGrade","OverallGrade","mappedWeights","map","courseData","calculatedGrade","result","previousGrade","newGrade","percentage","gradeColorClass","o","Instructor","UserID","g","i","_c7","CourseList","_s7","courses","setCourses","sem","setSem","yr","setYr","openSem","setOpenSem","openYr","setOpenYr","fetch","qs","join","then","r","handleRefreshCourseList","unique","field","all","Array","from","Set","s","y","delete","_c8","CreateCourse","_s8","form","setForm","Semester","Year","CreditHours","change","f","name","post","UserId","_c9","EditCourse","_s9","finally","put","_c10","App","path","element","_c11","$RefreshReg$"],"sources":["C:/Users/Brendon Nguyen/Desktop/T10Code/Team10/GradeView_Course/frontend/src/App.jsx"],"sourcesContent":["// src/App.js\r\nimport React, { useState, useEffect, createContext, useContext, useCallback, useRef, useMemo } from 'react';\r\nimport { BrowserRouter, Routes, Route, Navigate, useNavigate, useParams } from 'react-router-dom';\r\nimport axios from 'axios';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport { ChevronDown, ChevronUp } from 'lucide-react';\r\nimport WeightEditor from './components/WeightEditor';\r\nimport AssessmentList from './components/AssessmentList';\r\nimport { calculateSectionAverage, calculateOverallGrade, getGradeColor } from './utils/gradeCalculations';\r\nimport { jsPDF } from \"jspdf\";\r\nimport TranscriptDownloader from './components/TranscriptDownloader';\r\n\r\n/* ------------ Context & ProtectedRoute ------------ */\r\nexport const UserContext = createContext(null);\r\nconst UserProvider = ({ children }) => {\r\n  const [userId, setUserId] = useState(1); // Default to user ID 1\r\n  useEffect(() => {\r\n    const stored = localStorage.getItem('userId');\r\n    if (stored) setUserId(+stored);\r\n    else {\r\n      // Set default user ID to 1 and store in localStorage\r\n      localStorage.setItem('userId', 1);\r\n    }\r\n  }, []);\r\n  const updateUser = id => {\r\n    localStorage.setItem('userId', id);\r\n    setUserId(id);\r\n  };\r\n  return <UserContext.Provider value={{ userId, updateUser }}>{children}</UserContext.Provider>;\r\n};\r\nconst ProtectedRoute = ({ children }) => {\r\n  const { userId } = useContext(UserContext);\r\n  return userId ? children : <Navigate to=\"/login\" />;\r\n};\r\n\r\n/* ------------ API Helper ------------ */\r\nexport const api = axios.create({\r\n  baseURL: process.env.REACT_APP_API_BASE || 'http://localhost:5000',\r\n  headers: { 'Content-Type': 'application/json' }\r\n});\r\n\r\n/* ------------ Login Page ------------ */\r\nfunction LoginPage() {\r\n  const [u, setU] = useState(''), [p, setP] = useState(''), [err, setErr] = useState('');\r\n  const { updateUser } = useContext(UserContext);\r\n  const nav = useNavigate();\r\n  const submit = e => {\r\n    e.preventDefault();\r\n    if (u === 'testuser' && p === 'password') {\r\n      updateUser(1);\r\n      nav('/home');\r\n    } else {\r\n      setErr('Invalid username or password');\r\n    }\r\n  };\r\n  return (\r\n    <div className=\"container mt-5\">\r\n      <div className=\"card mx-auto\" style={{ maxWidth: 400 }}>\r\n        <div className=\"card-body\">\r\n          <h2 className=\"card-title text-center\">Login</h2>\r\n          {err && <div className=\"alert alert-danger\">{err}</div>}\r\n          <form onSubmit={submit}>\r\n            <div className=\"mb-3\">\r\n              <label className=\"form-label\">Username</label>\r\n              <input value={u} onChange={e => setU(e.target.value)} className=\"form-control\" required />\r\n            </div>\r\n            <div className=\"mb-3\">\r\n              <label className=\"form-label\">Password</label>\r\n              <input type=\"password\" value={p} onChange={e => setP(e.target.value)} className=\"form-control\" required />\r\n            </div>\r\n            <button type=\"submit\" className=\"btn btn-primary w-100\">Login</button>\r\n          </form>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n/* ------------ Home Page ------------ */\r\nfunction HomePage() {\r\n  const nav = useNavigate();\r\n  const { userId } = useContext(UserContext);\r\n  \r\n  return (\r\n    <div className=\"container mt-5 text-center\">\r\n      <h1>Welcome to GradeView</h1>\r\n      <div className=\"d-flex justify-content-center gap-3\">\r\n        <button className=\"btn btn-primary m-2\" onClick={()=>nav('/courses')}>\r\n          View Courses\r\n        </button>\r\n        <TranscriptDownloader userId={userId} />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n/* ------------ Course Listing & Details ------------ */\r\nconst AssessmentItem = ({ a }) => (\r\n  <div className=\"assessment-item\">\r\n    <span>{a.AssessmentName}:</span>\r\n    <span>{a.IndividualGrade!=null?`${a.IndividualGrade}%`:'N/A'}</span>\r\n  </div>\r\n);\r\nconst WeightSection = ({ courseId, weightId, weightPercentage, assessmentType, assessments = [], onWeightUpdate }) => {\r\n  const { userId } = useContext(UserContext);\r\n  const [editing, setEditing] = useState(false);\r\n  const [currentWeight, setCurrentWeight] = useState(weightPercentage);\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState('');\r\n  const lastRefreshTime = useRef(0);\r\n\r\n  // Update currentWeight when weightPercentage prop changes\r\n  useEffect(() => {\r\n    console.log('WeightSection: weightPercentage prop changed', { \r\n      courseId, \r\n      weightId, \r\n      assessmentType, \r\n      weightPercentage \r\n    });\r\n    setCurrentWeight(weightPercentage);\r\n  }, [weightPercentage, courseId, weightId, assessmentType]);\r\n\r\n  // Calculate section average\r\n  const sectionAverage = useMemo(() => {\r\n    const avg = calculateSectionAverage(assessments);\r\n    // Ensure the result is a number\r\n    return isNaN(avg) ? 0 : avg;\r\n  }, [assessments]);\r\n\r\n  const handleWeightUpdate = async (newWeight) => {\r\n    setCurrentWeight(newWeight);\r\n    onWeightUpdate(newWeight);\r\n    \r\n    // Trigger a refresh of the course data\r\n    const now = Date.now();\r\n    if (now - lastRefreshTime.current > 1000) {\r\n      lastRefreshTime.current = now;\r\n      const event = new CustomEvent('refreshCourse', { \r\n        detail: { courseId } \r\n      });\r\n      window.dispatchEvent(event);\r\n      \r\n      // Also trigger a refresh of the course list to update the overall grade\r\n      const courseListEvent = new CustomEvent('refreshCourseList');\r\n      window.dispatchEvent(courseListEvent);\r\n    }\r\n  };\r\n\r\n  const handleAssessmentChange = () => {\r\n    // Only refresh if it's been more than 1 second since the last refresh\r\n    const now = Date.now();\r\n    if (now - lastRefreshTime.current > 1000) {\r\n      lastRefreshTime.current = now;\r\n      const event = new CustomEvent('refreshCourse', { \r\n        detail: { courseId } \r\n      });\r\n      window.dispatchEvent(event);\r\n      \r\n      // Also trigger a refresh of the course list to update the overall grade\r\n      const courseListEvent = new CustomEvent('refreshCourseList');\r\n      window.dispatchEvent(courseListEvent);\r\n    }\r\n  };\r\n\r\n  const handleSave = async () => {\r\n    // Don't close the editor after saving\r\n    // This allows the user to see the updated weight and continue editing if needed\r\n  };\r\n\r\n  return (\r\n    <div className=\"weight-section\">\r\n      <div className=\"weight-header\" onClick={() => !editing && setEditing(true)}>\r\n        <div className=\"weight-info\">\r\n          <span className=\"weight-type\">{assessmentType}</span>\r\n          <span className=\"weight-percentage\">({currentWeight}%)</span>\r\n          <span className=\"section-average\">Average: {typeof sectionAverage === 'number' ? sectionAverage.toFixed(1) : '0.0'}%</span>\r\n        </div>\r\n        <div className=\"weight-actions\">\r\n          <button className=\"edit-weight-button\" onClick={() => setEditing(true)}>\r\n            Edit\r\n          </button>\r\n        </div>\r\n      </div>\r\n      \r\n      {editing && (\r\n        <WeightEditor\r\n          courseId={courseId}\r\n          weightId={weightId}\r\n          assessmentType={assessmentType}\r\n          weightPercentage={currentWeight}\r\n          onSave={handleSave}\r\n          onCancel={() => setEditing(false)}\r\n          onWeightUpdate={handleWeightUpdate}\r\n        />\r\n      )}\r\n      \r\n      <AnimatePresence>\r\n        {editing && (\r\n          <motion.div \r\n            initial={{height:0,opacity:0}} \r\n            animate={{height:'auto',opacity:1}} \r\n            exit={{height:0,opacity:0}} \r\n            className=\"assessment-list\"\r\n          >\r\n            <AssessmentList\r\n              courseId={courseId}\r\n              weightId={weightId}\r\n              assessmentType={assessmentType}\r\n              assessments={assessments}\r\n              onAssessmentChange={handleAssessmentChange}\r\n            />\r\n          </motion.div>\r\n        )}\r\n      </AnimatePresence>\r\n    </div>\r\n  );\r\n};\r\nconst CourseItem = ({ c, onDelete, onEdit }) => {\r\n  const [open, setOpen] = useState(false);\r\n  const [assessments, setAssessments] = useState([]);\r\n  const [weights, setWeights] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState('');\r\n  const { userId } = useContext(UserContext);\r\n  const fetchRef = useRef();\r\n  const [initialFetchDone, setInitialFetchDone] = useState(false);\r\n\r\n  const fetchAssessments = useCallback(async () => {\r\n    setLoading(true);\r\n    try {\r\n      // Fetch assessments\r\n      console.log('CourseItem: Fetching assessments', { \r\n        courseId: c.CourseID, \r\n        courseName: c.CourseName \r\n      });\r\n      const assessmentsResponse = await api.get(`/api/courses/${c.CourseID}/assessments`, {\r\n        headers: { 'x-user-id': userId }\r\n      });\r\n      console.log('CourseItem: Assessments fetched', { \r\n        courseId: c.CourseID, \r\n        courseName: c.CourseName,\r\n        assessmentCount: assessmentsResponse.data.length\r\n      });\r\n      setAssessments(assessmentsResponse.data);\r\n      \r\n      // Fetch weights\r\n      console.log('CourseItem: Fetching weights', { \r\n        courseId: c.CourseID, \r\n        courseName: c.CourseName \r\n      });\r\n      const weightsResponse = await api.get(`/api/courses/${c.CourseID}/weights`, {\r\n        headers: { 'x-user-id': userId }\r\n      });\r\n      console.log('CourseItem: Weights fetched', { \r\n        courseId: c.CourseID, \r\n        courseName: c.CourseName,\r\n        weightCount: weightsResponse.data.length,\r\n        weights: weightsResponse.data\r\n      });\r\n      setWeights(weightsResponse.data);\r\n      \r\n      setError('');\r\n    } catch (err) {\r\n      console.error('Error fetching course data:', err);\r\n      setError('Failed to load course data');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, [c.CourseID, userId]);\r\n\r\n  // Store the fetch function in a ref\r\n  useEffect(() => {\r\n    fetchRef.current = fetchAssessments;\r\n  }, [fetchAssessments]);\r\n\r\n  // Initial fetch when component mounts\r\n  useEffect(() => {\r\n    if (!initialFetchDone) {\r\n      console.log('CourseItem: Initial fetch', { \r\n        courseId: c.CourseID, \r\n        courseName: c.CourseName \r\n      });\r\n      fetchAssessments();\r\n      setInitialFetchDone(true);\r\n    }\r\n  }, [fetchAssessments, initialFetchDone, c.CourseID, c.CourseName]);\r\n\r\n  // Add event listener for course refresh\r\n  useEffect(() => {\r\n    const handleRefresh = (event) => {\r\n      if (event.detail.courseId === c.CourseID) {\r\n        console.log('Course refresh event received:', {\r\n          courseId: c.CourseID,\r\n          preserveOpenState: event.detail.preserveOpenState\r\n        });\r\n        \r\n        // Only fetch assessments if the course is open or if preserveOpenState is true\r\n        if (open || event.detail.preserveOpenState) {\r\n          fetchAssessments();\r\n        }\r\n      }\r\n    };\r\n\r\n    window.addEventListener('refreshCourse', handleRefresh);\r\n    return () => window.removeEventListener('refreshCourse', handleRefresh);\r\n  }, [c.CourseID, open]);\r\n\r\n  // Group assessments by weight type\r\n  const groupedAssessments = useMemo(() => {\r\n    const groups = {};\r\n    assessments.forEach(assessment => {\r\n      if (!groups[assessment.WeightID]) {\r\n        // Find the corresponding weight from the weights array\r\n        const weight = weights.find(w => w.id === assessment.WeightID);\r\n        \r\n        groups[assessment.WeightID] = {\r\n          weightType: weight ? weight.assessmentType : assessment.AssessmentType,\r\n          weightPercentage: weight ? weight.currentWeight : assessment.WeightPercentage,\r\n          weightId: assessment.WeightID,\r\n          courseId: c.CourseID,\r\n          assessments: []\r\n        };\r\n      }\r\n      groups[assessment.WeightID].assessments.push(assessment);\r\n    });\r\n    return Object.values(groups);\r\n  }, [assessments, weights, c.CourseID]);\r\n\r\n  // Calculate overall grade\r\n  const overallGrade = useMemo(() => {\r\n    if (weights.length === 0 || assessments.length === 0) return c.OverallGrade || 0;\r\n    \r\n    // Map the weights to the expected format\r\n    const mappedWeights = weights.map(w => ({\r\n      WeightID: w.id,\r\n      AssessmentType: w.assessmentType,\r\n      WeightPercentage: w.currentWeight\r\n    }));\r\n    \r\n    const courseData = {\r\n      weights: mappedWeights,\r\n      assessments\r\n    };\r\n    \r\n    const calculatedGrade = calculateOverallGrade(courseData);\r\n    // Ensure the result is a number\r\n    const result = isNaN(calculatedGrade) ? 0 : calculatedGrade;\r\n    \r\n    // Log the grade change\r\n    console.log(`Course ${c.CourseName} (ID: ${c.CourseID}) grade updated:`, {\r\n      previousGrade: c.OverallGrade || 0,\r\n      newGrade: result,\r\n      weights: mappedWeights.map(w => ({ type: w.AssessmentType, percentage: w.WeightPercentage })),\r\n      assessmentCount: assessments.length\r\n    });\r\n    \r\n    return result;\r\n  }, [weights, assessments, c.OverallGrade, c.CourseID, c.CourseName]);\r\n\r\n  // Get grade color\r\n  const gradeColorClass = useMemo(() => {\r\n    return getGradeColor(overallGrade);\r\n  }, [overallGrade]);\r\n\r\n  return (\r\n    <div className=\"course-item\" data-course-id={c.CourseID}>\r\n      <div className=\"course-header\">\r\n        <div className=\"course-details\" onClick={() => setOpen(o => !o)}>\r\n          <div className=\"course-name\">{c.CourseName}</div>\r\n          <div className=\"instructor\">{c.Instructor}</div>\r\n        </div>\r\n        <div className=\"header-actions\">\r\n          <button className=\"edit-button\" onClick={() => onEdit(c.CourseID)}>Edit</button>\r\n          <button className=\"delete-button\" onClick={() => onDelete(c.UserID, c.CourseID)}>Delete</button>\r\n        </div>\r\n        <div className={`grade ${gradeColorClass}`}>\r\n          {typeof overallGrade === 'number' ? overallGrade.toFixed(1) : '0.0'}\r\n        </div>\r\n        {open ? <ChevronUp onClick={() => setOpen(false)} /> : <ChevronDown onClick={() => setOpen(true)} />}\r\n      </div>\r\n      <AnimatePresence>\r\n        {open && (\r\n          <motion.div \r\n            initial={{height:0,opacity:0}} \r\n            animate={{height:'auto',opacity:1}} \r\n            exit={{height:0,opacity:0}} \r\n            className=\"course-dropdown\"\r\n          >\r\n            {loading ? (\r\n              <div>Loading...</div>\r\n            ) : groupedAssessments.length > 0 ? (\r\n              groupedAssessments.map((g, i) => (\r\n                <WeightSection \r\n                  key={i} \r\n                  courseId={g.courseId} \r\n                  weightId={g.weightId} \r\n                  weightPercentage={g.weightPercentage} \r\n                  assessmentType={g.weightType} \r\n                  assessments={g.assessments} \r\n                  onWeightUpdate={(newWeight) => {\r\n                    // Dispatch a refresh event to update the course data\r\n                    const event = new CustomEvent('refreshCourse', { \r\n                      detail: { courseId: g.courseId } \r\n                    });\r\n                    window.dispatchEvent(event);\r\n                  }}\r\n                />\r\n              ))\r\n            ) : (\r\n              <div>No assessments.</div>\r\n            )}\r\n          </motion.div>\r\n        )}\r\n      </AnimatePresence>\r\n    </div>\r\n  );\r\n};\r\nfunction CourseList() {\r\n  const [courses, setCourses] = useState([]);\r\n  const [sem, setSem] = useState('All'), [yr,setYr]=useState('All');\r\n  const [openSem, setOpenSem] = useState(false), [openYr,setOpenYr]=useState(false);\r\n  const { userId } = useContext(UserContext);\r\n  const nav = useNavigate();\r\n  const fetch = () => {\r\n    const qs = [];\r\n    if (sem!=='All') qs.push(`semester=${sem}`);\r\n    if (yr!=='All') qs.push(`year=${yr}`);\r\n    if (userId) qs.push(`userId=${userId}`);\r\n    \r\n    console.log('Fetching course data...');\r\n    \r\n    api.get(`/${qs.length?`?${qs.join('&')}`:''}`)\r\n       .then(r => {\r\n         console.log('Course data fetched:', r.data.map(c => ({\r\n           courseId: c.CourseID,\r\n           courseName: c.CourseName,\r\n           overallGrade: c.OverallGrade\r\n         })));\r\n         setCourses(r.data);\r\n       });\r\n  };\r\n  useEffect(fetch, [sem,yr,userId]);\r\n  \r\n  // Add event listener for refreshCourseList event\r\n  useEffect(() => {\r\n    const handleRefreshCourseList = () => {\r\n      console.log('refreshCourseList event received, refreshing course data');\r\n      fetch();\r\n    };\r\n    \r\n    window.addEventListener('refreshCourseList', handleRefreshCourseList);\r\n    return () => window.removeEventListener('refreshCourseList', handleRefreshCourseList);\r\n  }, []);\r\n  \r\n  const unique = (field, all) => ['All', ...Array.from(new Set(all.map(c=>c[field])))] ;\r\n  return (\r\n    <div className=\"course-container\">\r\n      <div className=\"header\">\r\n        <div className={`semester-dropdown ${openSem?'open':''}`}>\r\n          <button className=\"semester-button\" onClick={()=>setOpenSem(o=>!o)}>{sem} v</button>\r\n          {openSem && <div className=\"dropdown-content\">\r\n            {unique('Semester',courses).map(s=><button key={s} className={s===sem?'active':''} onClick={()=>{setSem(s);setOpenSem(false);}}>{s}</button>)}\r\n          </div>}\r\n        </div>\r\n        <div className={`semester-download ${openYr?'open':''}`}>\r\n          <button className=\"download-button\" onClick={()=>setOpenYr(o=>!o)}>{yr} v</button>\r\n          {openYr && <div className=\"dropdown-content\">\r\n            {unique('Year',courses).map(y=><button key={y} className={y===yr?'active':''} onClick={()=>{setYr(y);setOpenYr(false);}}>{y}</button>)}\r\n          </div>}\r\n        </div>\r\n        <button className=\"add-button\" onClick={()=>nav('/create')}>Add Course</button>\r\n      </div>\r\n      <div className=\"course-list\">\r\n        {courses.map(c=>(\r\n          <CourseItem key={c.CourseID} c={c} \r\n            onDelete={(u,id)=>api.delete(`/course/${id}`,{data:{UserID:userId}}).then(fetch)}\r\n            onEdit={id=>nav(`/edit/${id}`)}\r\n          />\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n/* ------------ Create & Edit Pages ------------ */\r\nfunction CreateCourse() {\r\n  const [form, setForm] = useState({ CourseName:'',Instructor:'',Semester:'',Year:'',CreditHours:'' });\r\n  const { userId } = useContext(UserContext);\r\n  const nav = useNavigate();\r\n  const change = e => setForm(f=>({ ...f, [e.target.name]: e.target.value }));\r\n  const submit = e => {\r\n    e.preventDefault();\r\n    api.post('/course', { ...form, UserId: userId }).then(()=>nav('/courses'));\r\n  };\r\n  return (\r\n    <div className=\"container mt-5\">\r\n      <h2>Create Course</h2>\r\n      <form onSubmit={submit}>\r\n        {['CourseName','Instructor','Semester','Year','CreditHours'].map(field=>(\r\n          <div className=\"mb-3\" key={field}>\r\n            <label className=\"form-label\">{field}</label>\r\n            <input \r\n              name={field} \r\n              type={field==='CreditHours'?'number':'text'} \r\n              className=\"form-control\" \r\n              value={form[field]} \r\n              onChange={change} required \r\n            />\r\n          </div>\r\n        ))}\r\n        <button className=\"btn btn-primary\">Create</button>\r\n        <button type=\"button\" className=\"btn btn-secondary ms-2\" onClick={()=>nav('/courses')}>Cancel</button>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\nfunction EditCourse() {\r\n  const { id } = useParams();\r\n  const { userId } = useContext(UserContext);\r\n  const [form, setForm] = useState({});\r\n  const [loading, setLoading] = useState(true);\r\n  const nav = useNavigate();\r\n  useEffect(()=>{\r\n    api.get(`/course/${id}?userId=${userId}`)\r\n       .then(r=>setForm(r.data))\r\n       .finally(()=>setLoading(false));\r\n  },[id,userId]);\r\n  const change = e => setForm(f=>({ ...f, [e.target.name]: e.target.value }));\r\n  const submit = e => {\r\n    e.preventDefault();\r\n    api.put(`/course/${id}`, { ...form, UserID: userId }).then(()=>nav('/courses'));\r\n  };\r\n  if (loading) return <div>Loading...</div>;\r\n  return (\r\n    <div className=\"container mt-5\">\r\n      <h2>Edit Course</h2>\r\n      <form onSubmit={submit}>\r\n        {['CourseName','Instructor','Semester','Year','CreditHours'].map(field=>(\r\n          <div className=\"mb-3\" key={field}>\r\n            <label className=\"form-label\">{field}</label>\r\n            <input \r\n              name={field} \r\n              type={field==='CreditHours'?'number':'text'} \r\n              className=\"form-control\" \r\n              value={form[field]||''} \r\n              onChange={change} required \r\n            />\r\n          </div>\r\n        ))}\r\n        <button className=\"btn btn-primary\">Save</button>\r\n        <button type=\"button\" className=\"btn btn-secondary ms-2\" onClick={()=>nav('/courses')}>Cancel</button>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n\r\n/* ------------ App & Routing ------------ */\r\nexport default function App() {\r\n  return (\r\n    <UserProvider>\r\n      <BrowserRouter>\r\n        <Routes>\r\n          <Route path=\"/login\" element={<LoginPage />} />\r\n          <Route path=\"/home\" element={<ProtectedRoute><HomePage/></ProtectedRoute>} />\r\n          <Route path=\"/courses\" element={<ProtectedRoute><CourseList/></ProtectedRoute>} />\r\n          <Route path=\"/create\" element={<ProtectedRoute><CreateCourse/></ProtectedRoute>} />\r\n          <Route path=\"/edit/:id\" element={<ProtectedRoute><EditCourse/></ProtectedRoute>} />\r\n          <Route path=\"*\" element={<Navigate to=\"/home\" />} /> {/* Changed redirect from /login to /home */}\r\n        </Routes>\r\n      </BrowserRouter>\r\n    </UserProvider>\r\n  );\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}