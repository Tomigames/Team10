{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Brendon Nguyen\\\\Desktop\\\\T10Code\\\\Team10\\\\GradeView_Course\\\\frontend\\\\src\\\\App.jsx\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$(),\n  _s3 = $RefreshSig$(),\n  _s4 = $RefreshSig$(),\n  _s5 = $RefreshSig$(),\n  _s6 = $RefreshSig$(),\n  _s7 = $RefreshSig$(),\n  _s8 = $RefreshSig$(),\n  _s9 = $RefreshSig$();\n// src/App.js\nimport React, { useState, useEffect, createContext, useContext, useCallback, useRef, useMemo } from 'react';\nimport { BrowserRouter, Routes, Route, Navigate, useNavigate, useParams } from 'react-router-dom';\nimport axios from 'axios';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { ChevronDown, ChevronUp } from 'lucide-react';\nimport WeightEditor from './components/WeightEditor';\nimport AssessmentList from './components/AssessmentList';\nimport { calculateSectionAverage, calculateOverallGrade, getGradeColor } from './utils/gradeCalculations';\nimport { jsPDF } from \"jspdf\";\nimport TranscriptDownloader from './components/TranscriptDownloader';\n\n/* ------------ Context & ProtectedRoute ------------ */\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const UserContext = /*#__PURE__*/createContext(null);\nconst UserProvider = ({\n  children\n}) => {\n  _s();\n  const [userId, setUserId] = useState(1); // Default to user ID 1\n  useEffect(() => {\n    const stored = localStorage.getItem('userId');\n    if (stored) setUserId(+stored);else {\n      // Set default user ID to 1 and store in localStorage\n      localStorage.setItem('userId', 1);\n    }\n  }, []);\n  const updateUser = id => {\n    localStorage.setItem('userId', id);\n    setUserId(id);\n  };\n  return /*#__PURE__*/_jsxDEV(UserContext.Provider, {\n    value: {\n      userId,\n      updateUser\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 29,\n    columnNumber: 10\n  }, this);\n};\n_s(UserProvider, \"6S5gesFbrWVa+0WZkcU7MTUhq4Q=\");\n_c = UserProvider;\nconst ProtectedRoute = ({\n  children\n}) => {\n  _s2();\n  const {\n    userId\n  } = useContext(UserContext);\n  return userId ? children : /*#__PURE__*/_jsxDEV(Navigate, {\n    to: \"/login\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 33,\n    columnNumber: 30\n  }, this);\n};\n\n/* ------------ API Helper ------------ */\n_s2(ProtectedRoute, \"f1xc73H04AOIcBBBtmriXwWn3kM=\");\n_c2 = ProtectedRoute;\nexport const api = axios.create({\n  baseURL: process.env.REACT_APP_API_BASE || 'http://localhost:5000',\n  headers: {\n    'Content-Type': 'application/json'\n  }\n});\n\n/* ------------ Login Page ------------ */\nfunction LoginPage() {\n  _s3();\n  const [u, setU] = useState(''),\n    [p, setP] = useState(''),\n    [err, setErr] = useState('');\n  const {\n    updateUser\n  } = useContext(UserContext);\n  const nav = useNavigate();\n  const submit = e => {\n    e.preventDefault();\n    if (u === 'testuser' && p === 'password') {\n      updateUser(1);\n      nav('/home');\n    } else {\n      setErr('Invalid username or password');\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container mt-5\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"card mx-auto\",\n      style: {\n        maxWidth: 400\n      },\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"card-body\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"card-title text-center\",\n          children: \"Login\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 11\n        }, this), err && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"alert alert-danger\",\n          children: err\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 19\n        }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n          onSubmit: submit,\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mb-3\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"form-label\",\n              children: \"Username\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 64,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              value: u,\n              onChange: e => setU(e.target.value),\n              className: \"form-control\",\n              required: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 65,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 63,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mb-3\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"form-label\",\n              children: \"Password\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 68,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"password\",\n              value: p,\n              onChange: e => setP(e.target.value),\n              className: \"form-control\",\n              required: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 69,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 67,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"submit\",\n            className: \"btn btn-primary w-100\",\n            children: \"Login\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 71,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 57,\n    columnNumber: 5\n  }, this);\n}\n\n/* ------------ Home Page ------------ */\n_s3(LoginPage, \"14nnJnbBkWy4TVbiO4veHiHiqtY=\", false, function () {\n  return [useNavigate];\n});\n_c3 = LoginPage;\nfunction HomePage() {\n  _s4();\n  const nav = useNavigate();\n  const {\n    userId\n  } = useContext(UserContext);\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState(null);\n  const handleDownloadTranscript = async () => {\n    setIsLoading(true);\n    setError(null);\n    try {\n      console.log(\"Attempting to download transcript for user:\", userId);\n\n      // Request the PDF from the backend\n      const response = await api.get(`/api/users/${userId}/generate-transcript`, {\n        headers: {\n          'x-user-id': userId.toString() // Ensure userId is a string\n        },\n        responseType: 'blob' // Important: This tells axios to handle the response as a binary blob\n      });\n\n      // Check if we got a valid response\n      if (!response.data || response.data.size === 0) {\n        throw new Error(\"Received empty PDF data\");\n      }\n\n      // Create a URL for the blob\n      const blob = new Blob([response.data], {\n        type: 'application/pdf'\n      });\n      const url = window.URL.createObjectURL(blob);\n\n      // Create a link and trigger download\n      const link = document.createElement('a');\n      link.href = url;\n      link.setAttribute('download', `transcript_user_${userId}.pdf`);\n      document.body.appendChild(link);\n      link.click();\n\n      // Clean up\n      window.URL.revokeObjectURL(url);\n      document.body.removeChild(link);\n    } catch (err) {\n      console.error('Error downloading transcript:', err);\n      setError(`Failed to download transcri: ${err.message || 'Please try again later.'}`);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container mt-5 text-center\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Welcome to GradeView\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"d-flex justify-content-center gap-3\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"btn btn-primary m-2\",\n        onClick: () => nav('/courses'),\n        children: \"View Courses\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"btn btn-success m-2\",\n        onClick: handleDownloadTranscript,\n        disabled: isLoading,\n        children: isLoading ? 'Generating PDF...' : 'Download Transcript'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 7\n    }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"alert alert-danger mt-2\",\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 129,\n    columnNumber: 5\n  }, this);\n}\n\n/* ------------ Course Listing & Details ------------ */\n_s4(HomePage, \"F/tA9TkDPR+/036uN85+qnBMSeA=\", false, function () {\n  return [useNavigate];\n});\n_c4 = HomePage;\nconst AssessmentItem = ({\n  a\n}) => /*#__PURE__*/_jsxDEV(\"div\", {\n  className: \"assessment-item\",\n  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n    children: [a.AssessmentName, \":\"]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 151,\n    columnNumber: 5\n  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n    children: a.IndividualGrade != null ? `${a.IndividualGrade}%` : 'N/A'\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 152,\n    columnNumber: 5\n  }, this)]\n}, void 0, true, {\n  fileName: _jsxFileName,\n  lineNumber: 150,\n  columnNumber: 3\n}, this);\n_c5 = AssessmentItem;\nconst WeightSection = ({\n  courseId,\n  weightId,\n  weightPercentage,\n  assessmentType,\n  assessments = [],\n  onWeightUpdate\n}) => {\n  _s5();\n  const {\n    userId\n  } = useContext(UserContext);\n  const [editing, setEditing] = useState(false);\n  const [currentWeight, setCurrentWeight] = useState(weightPercentage);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState('');\n  const lastRefreshTime = useRef(0);\n\n  // Update currentWeight when weightPercentage prop changes\n  useEffect(() => {\n    console.log('WeightSection: weightPercentage prop changed', {\n      courseId,\n      weightId,\n      assessmentType,\n      weightPercentage\n    });\n    setCurrentWeight(weightPercentage);\n  }, [weightPercentage, courseId, weightId, assessmentType]);\n\n  // Calculate section average\n  const sectionAverage = useMemo(() => {\n    const avg = calculateSectionAverage(assessments);\n    // Ensure the result is a number\n    return isNaN(avg) ? 0 : avg;\n  }, [assessments]);\n  const handleWeightUpdate = async newWeight => {\n    setCurrentWeight(newWeight);\n    onWeightUpdate(newWeight);\n\n    // Trigger a refresh of the course data\n    const now = Date.now();\n    if (now - lastRefreshTime.current > 1000) {\n      lastRefreshTime.current = now;\n      const event = new CustomEvent('refreshCourse', {\n        detail: {\n          courseId\n        }\n      });\n      window.dispatchEvent(event);\n\n      // Also trigger a refresh of the course list to update the overall grade\n      const courseListEvent = new CustomEvent('refreshCourseList');\n      window.dispatchEvent(courseListEvent);\n    }\n  };\n  const handleAssessmentChange = () => {\n    // Only refresh if it's been more than 1 second since the last refresh\n    const now = Date.now();\n    if (now - lastRefreshTime.current > 1000) {\n      lastRefreshTime.current = now;\n      const event = new CustomEvent('refreshCourse', {\n        detail: {\n          courseId\n        }\n      });\n      window.dispatchEvent(event);\n\n      // Also trigger a refresh of the course list to update the overall grade\n      const courseListEvent = new CustomEvent('refreshCourseList');\n      window.dispatchEvent(courseListEvent);\n    }\n  };\n  const handleSave = async () => {\n    // Don't close the editor after saving\n    // This allows the user to see the updated weight and continue editing if needed\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"weight-section\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"weight-header\",\n      onClick: () => !editing && setEditing(true),\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"weight-info\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"weight-type\",\n          children: assessmentType\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 225,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"weight-percentage\",\n          children: [\"(\", currentWeight, \"%)\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 226,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"section-average\",\n          children: [\"Average: \", typeof sectionAverage === 'number' ? sectionAverage.toFixed(1) : '0.0', \"%\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 227,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 224,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"weight-actions\",\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"edit-weight-button\",\n          onClick: () => setEditing(true),\n          children: \"Edit\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 230,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 229,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 223,\n      columnNumber: 7\n    }, this), editing && /*#__PURE__*/_jsxDEV(WeightEditor, {\n      courseId: courseId,\n      weightId: weightId,\n      assessmentType: assessmentType,\n      weightPercentage: currentWeight,\n      onSave: handleSave,\n      onCancel: () => setEditing(false),\n      onWeightUpdate: handleWeightUpdate\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 237,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(AnimatePresence, {\n      children: editing && /*#__PURE__*/_jsxDEV(motion.div, {\n        initial: {\n          height: 0,\n          opacity: 0\n        },\n        animate: {\n          height: 'auto',\n          opacity: 1\n        },\n        exit: {\n          height: 0,\n          opacity: 0\n        },\n        className: \"assessment-list\",\n        children: /*#__PURE__*/_jsxDEV(AssessmentList, {\n          courseId: courseId,\n          weightId: weightId,\n          assessmentType: assessmentType,\n          assessments: assessments,\n          onAssessmentChange: handleAssessmentChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 256,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 250,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 248,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 222,\n    columnNumber: 5\n  }, this);\n};\n_s5(WeightSection, \"4OXqaxskqv2dridS4SHEFgBEKbo=\");\n_c6 = WeightSection;\nconst CourseItem = ({\n  c,\n  onDelete,\n  onEdit\n}) => {\n  _s6();\n  const [open, setOpen] = useState(false);\n  const [assessments, setAssessments] = useState([]);\n  const [weights, setWeights] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState('');\n  const {\n    userId\n  } = useContext(UserContext);\n  const fetchRef = useRef();\n  const [initialFetchDone, setInitialFetchDone] = useState(false);\n  const fetchAssessments = useCallback(async () => {\n    setLoading(true);\n    try {\n      // Fetch assessments\n      console.log('CourseItem: Fetching assessments', {\n        courseId: c.CourseID,\n        courseName: c.CourseName\n      });\n      const assessmentsResponse = await api.get(`/api/courses/${c.CourseID}/assessments`, {\n        headers: {\n          'x-user-id': userId\n        }\n      });\n      console.log('CourseItem: Assessments fetched', {\n        courseId: c.CourseID,\n        courseName: c.CourseName,\n        assessmentCount: assessmentsResponse.data.length\n      });\n      setAssessments(assessmentsResponse.data);\n\n      // Fetch weights\n      console.log('CourseItem: Fetching weights', {\n        courseId: c.CourseID,\n        courseName: c.CourseName\n      });\n      const weightsResponse = await api.get(`/api/courses/${c.CourseID}/weights`, {\n        headers: {\n          'x-user-id': userId\n        }\n      });\n      console.log('CourseItem: Weights fetched', {\n        courseId: c.CourseID,\n        courseName: c.CourseName,\n        weightCount: weightsResponse.data.length,\n        weights: weightsResponse.data\n      });\n      setWeights(weightsResponse.data);\n      setError('');\n    } catch (err) {\n      console.error('Error fetching course data:', err);\n      setError('Failed to load course data');\n    } finally {\n      setLoading(false);\n    }\n  }, [c.CourseID, userId]);\n\n  // Store the fetch function in a ref\n  useEffect(() => {\n    fetchRef.current = fetchAssessments;\n  }, [fetchAssessments]);\n\n  // Initial fetch when component mounts\n  useEffect(() => {\n    if (!initialFetchDone) {\n      console.log('CourseItem: Initial fetch', {\n        courseId: c.CourseID,\n        courseName: c.CourseName\n      });\n      fetchAssessments();\n      setInitialFetchDone(true);\n    }\n  }, [fetchAssessments, initialFetchDone, c.CourseID, c.CourseName]);\n\n  // Add event listener for course refresh\n  useEffect(() => {\n    const handleRefresh = event => {\n      if (event.detail.courseId === c.CourseID) {\n        console.log('Course refresh event received:', {\n          courseId: c.CourseID,\n          preserveOpenState: event.detail.preserveOpenState\n        });\n\n        // Only fetch assessments if the course is open or if preserveOpenState is true\n        if (open || event.detail.preserveOpenState) {\n          fetchAssessments();\n        }\n      }\n    };\n    window.addEventListener('refreshCourse', handleRefresh);\n    return () => window.removeEventListener('refreshCourse', handleRefresh);\n  }, [c.CourseID, open]);\n\n  // Group assessments by weight type\n  const groupedAssessments = useMemo(() => {\n    const groups = {};\n    assessments.forEach(assessment => {\n      if (!groups[assessment.WeightID]) {\n        // Find the corresponding weight from the weights array\n        const weight = weights.find(w => w.id === assessment.WeightID);\n        groups[assessment.WeightID] = {\n          weightType: weight ? weight.assessmentType : assessment.AssessmentType,\n          weightPercentage: weight ? weight.currentWeight : assessment.WeightPercentage,\n          weightId: assessment.WeightID,\n          courseId: c.CourseID,\n          assessments: []\n        };\n      }\n      groups[assessment.WeightID].assessments.push(assessment);\n    });\n    return Object.values(groups);\n  }, [assessments, weights, c.CourseID]);\n\n  // Calculate overall grade\n  const overallGrade = useMemo(() => {\n    if (weights.length === 0 || assessments.length === 0) return c.OverallGrade || 0;\n\n    // Map the weights to the expected format\n    const mappedWeights = weights.map(w => ({\n      WeightID: w.id,\n      AssessmentType: w.assessmentType,\n      WeightPercentage: w.currentWeight\n    }));\n    const courseData = {\n      weights: mappedWeights,\n      assessments\n    };\n    const calculatedGrade = calculateOverallGrade(courseData);\n    // Ensure the result is a number\n    const result = isNaN(calculatedGrade) ? 0 : calculatedGrade;\n\n    // Log the grade change\n    console.log(`Course ${c.CourseName} (ID: ${c.CourseID}) grade updated:`, {\n      previousGrade: c.OverallGrade || 0,\n      newGrade: result,\n      weights: mappedWeights.map(w => ({\n        type: w.AssessmentType,\n        percentage: w.WeightPercentage\n      })),\n      assessmentCount: assessments.length\n    });\n    return result;\n  }, [weights, assessments, c.OverallGrade, c.CourseID, c.CourseName]);\n\n  // Get grade color\n  const gradeColorClass = useMemo(() => {\n    return getGradeColor(overallGrade);\n  }, [overallGrade]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"course-item\",\n    \"data-course-id\": c.CourseID,\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"course-header\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"course-details\",\n        onClick: () => setOpen(o => !o),\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"course-name\",\n          children: c.CourseName\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 420,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"instructor\",\n          children: c.Instructor\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 421,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 419,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"header-actions\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"edit-button\",\n          onClick: () => onEdit(c.CourseID),\n          children: \"Edit\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 424,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"delete-button\",\n          onClick: () => onDelete(c.UserID, c.CourseID),\n          children: \"Delete\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 425,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 423,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: `grade ${gradeColorClass}`,\n        children: typeof overallGrade === 'number' ? overallGrade.toFixed(1) : '0.0'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 427,\n        columnNumber: 9\n      }, this), open ? /*#__PURE__*/_jsxDEV(ChevronUp, {\n        onClick: () => setOpen(false)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 430,\n        columnNumber: 17\n      }, this) : /*#__PURE__*/_jsxDEV(ChevronDown, {\n        onClick: () => setOpen(true)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 430,\n        columnNumber: 64\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 418,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(AnimatePresence, {\n      children: open && /*#__PURE__*/_jsxDEV(motion.div, {\n        initial: {\n          height: 0,\n          opacity: 0\n        },\n        animate: {\n          height: 'auto',\n          opacity: 1\n        },\n        exit: {\n          height: 0,\n          opacity: 0\n        },\n        className: \"course-dropdown\",\n        children: loading ? /*#__PURE__*/_jsxDEV(\"div\", {\n          children: \"Loading...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 441,\n          columnNumber: 15\n        }, this) : groupedAssessments.length > 0 ? groupedAssessments.map((g, i) => /*#__PURE__*/_jsxDEV(WeightSection, {\n          courseId: g.courseId,\n          weightId: g.weightId,\n          weightPercentage: g.weightPercentage,\n          assessmentType: g.weightType,\n          assessments: g.assessments,\n          onWeightUpdate: newWeight => {\n            // Dispatch a refresh event to update the course data\n            const event = new CustomEvent('refreshCourse', {\n              detail: {\n                courseId: g.courseId\n              }\n            });\n            window.dispatchEvent(event);\n          }\n        }, i, false, {\n          fileName: _jsxFileName,\n          lineNumber: 444,\n          columnNumber: 17\n        }, this)) : /*#__PURE__*/_jsxDEV(\"div\", {\n          children: \"No assessments.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 461,\n          columnNumber: 15\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 434,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 432,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 417,\n    columnNumber: 5\n  }, this);\n};\n_s6(CourseItem, \"WLCnYV2taEabx0za/5+xaJOTazA=\");\n_c7 = CourseItem;\nfunction CourseList() {\n  _s7();\n  const [courses, setCourses] = useState([]);\n  const [sem, setSem] = useState('All'),\n    [yr, setYr] = useState('All');\n  const [openSem, setOpenSem] = useState(false),\n    [openYr, setOpenYr] = useState(false);\n  const {\n    userId\n  } = useContext(UserContext);\n  const nav = useNavigate();\n  const fetch = () => {\n    const qs = [];\n    if (sem !== 'All') qs.push(`semester=${sem}`);\n    if (yr !== 'All') qs.push(`year=${yr}`);\n    if (userId) qs.push(`userId=${userId}`);\n    console.log('Fetching course data...');\n    api.get(`/${qs.length ? `?${qs.join('&')}` : ''}`).then(r => {\n      console.log('Course data fetched:', r.data.map(c => ({\n        courseId: c.CourseID,\n        courseName: c.CourseName,\n        overallGrade: c.OverallGrade\n      })));\n      setCourses(r.data);\n    });\n  };\n  useEffect(fetch, [sem, yr, userId]);\n\n  // Add event listener for refreshCourseList event\n  useEffect(() => {\n    const handleRefreshCourseList = () => {\n      console.log('refreshCourseList event received, refreshing course data');\n      fetch();\n    };\n    window.addEventListener('refreshCourseList', handleRefreshCourseList);\n    return () => window.removeEventListener('refreshCourseList', handleRefreshCourseList);\n  }, []);\n  const unique = (field, all) => ['All', ...Array.from(new Set(all.map(c => c[field])))];\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"course-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"header\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: `semester-dropdown ${openSem ? 'open' : ''}`,\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"semester-button\",\n          onClick: () => setOpenSem(o => !o),\n          children: [sem, \" v\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 511,\n          columnNumber: 11\n        }, this), openSem && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"dropdown-content\",\n          children: unique('Semester', courses).map(s => /*#__PURE__*/_jsxDEV(\"button\", {\n            className: s === sem ? 'active' : '',\n            onClick: () => {\n              setSem(s);\n              setOpenSem(false);\n            },\n            children: s\n          }, s, false, {\n            fileName: _jsxFileName,\n            lineNumber: 513,\n            columnNumber: 48\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 512,\n          columnNumber: 23\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 510,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: `semester-download ${openYr ? 'open' : ''}`,\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"download-button\",\n          onClick: () => setOpenYr(o => !o),\n          children: [yr, \" v\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 517,\n          columnNumber: 11\n        }, this), openYr && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"dropdown-content\",\n          children: unique('Year', courses).map(y => /*#__PURE__*/_jsxDEV(\"button\", {\n            className: y === yr ? 'active' : '',\n            onClick: () => {\n              setYr(y);\n              setOpenYr(false);\n            },\n            children: y\n          }, y, false, {\n            fileName: _jsxFileName,\n            lineNumber: 519,\n            columnNumber: 44\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 518,\n          columnNumber: 22\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 516,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"add-button\",\n        onClick: () => nav('/create'),\n        children: \"Add Course\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 522,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 509,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"course-list\",\n      children: courses.map(c => /*#__PURE__*/_jsxDEV(CourseItem, {\n        c: c,\n        onDelete: (u, id) => api.delete(`/course/${id}`, {\n          data: {\n            UserID: userId\n          }\n        }).then(fetch),\n        onEdit: id => nav(`/edit/${id}`)\n      }, c.CourseID, false, {\n        fileName: _jsxFileName,\n        lineNumber: 526,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 524,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 508,\n    columnNumber: 5\n  }, this);\n}\n\n/* ------------ Create & Edit Pages ------------ */\n_s7(CourseList, \"X+jgPIWKlMulUwQ9B0meU6Ne9KQ=\", false, function () {\n  return [useNavigate];\n});\n_c8 = CourseList;\nfunction CreateCourse() {\n  _s8();\n  const [form, setForm] = useState({\n    CourseName: '',\n    Instructor: '',\n    Semester: '',\n    Year: '',\n    CreditHours: ''\n  });\n  const {\n    userId\n  } = useContext(UserContext);\n  const nav = useNavigate();\n  const change = e => setForm(f => ({\n    ...f,\n    [e.target.name]: e.target.value\n  }));\n  const submit = e => {\n    e.preventDefault();\n    api.post('/course', {\n      ...form,\n      UserId: userId\n    }).then(() => nav('/courses'));\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container mt-5\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Create Course\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 548,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: submit,\n      children: [['CourseName', 'Instructor', 'Semester', 'Year', 'CreditHours'].map(field => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mb-3\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"form-label\",\n          children: field\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 552,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          name: field,\n          type: field === 'CreditHours' ? 'number' : 'text',\n          className: \"form-control\",\n          value: form[field],\n          onChange: change,\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 553,\n          columnNumber: 13\n        }, this)]\n      }, field, true, {\n        fileName: _jsxFileName,\n        lineNumber: 551,\n        columnNumber: 11\n      }, this)), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"btn btn-primary\",\n        children: \"Create\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 562,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        className: \"btn btn-secondary ms-2\",\n        onClick: () => nav('/courses'),\n        children: \"Cancel\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 563,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 549,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 547,\n    columnNumber: 5\n  }, this);\n}\n_s8(CreateCourse, \"nYlpPX2NllIFdJ8il6tceMdSkXQ=\", false, function () {\n  return [useNavigate];\n});\n_c9 = CreateCourse;\nfunction EditCourse() {\n  _s9();\n  const {\n    id\n  } = useParams();\n  const {\n    userId\n  } = useContext(UserContext);\n  const [form, setForm] = useState({});\n  const [loading, setLoading] = useState(true);\n  const nav = useNavigate();\n  useEffect(() => {\n    api.get(`/course/${id}?userId=${userId}`).then(r => setForm(r.data)).finally(() => setLoading(false));\n  }, [id, userId]);\n  const change = e => setForm(f => ({\n    ...f,\n    [e.target.name]: e.target.value\n  }));\n  const submit = e => {\n    e.preventDefault();\n    api.put(`/course/${id}`, {\n      ...form,\n      UserID: userId\n    }).then(() => nav('/courses'));\n  };\n  if (loading) return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: \"Loading...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 584,\n    columnNumber: 23\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container mt-5\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Edit Course\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 587,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: submit,\n      children: [['CourseName', 'Instructor', 'Semester', 'Year', 'CreditHours'].map(field => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mb-3\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"form-label\",\n          children: field\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 591,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          name: field,\n          type: field === 'CreditHours' ? 'number' : 'text',\n          className: \"form-control\",\n          value: form[field] || '',\n          onChange: change,\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 592,\n          columnNumber: 13\n        }, this)]\n      }, field, true, {\n        fileName: _jsxFileName,\n        lineNumber: 590,\n        columnNumber: 11\n      }, this)), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"btn btn-primary\",\n        children: \"Save\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 601,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        className: \"btn btn-secondary ms-2\",\n        onClick: () => nav('/courses'),\n        children: \"Cancel\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 602,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 588,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 586,\n    columnNumber: 5\n  }, this);\n}\n\n/* ------------ App & Routing ------------ */\n_s9(EditCourse, \"/JC+j5CLVZIztyAup99f2yfDtf0=\", false, function () {\n  return [useParams, useNavigate];\n});\n_c10 = EditCourse;\nexport default function App() {\n  return /*#__PURE__*/_jsxDEV(UserProvider, {\n    children: /*#__PURE__*/_jsxDEV(BrowserRouter, {\n      children: /*#__PURE__*/_jsxDEV(Routes, {\n        children: [/*#__PURE__*/_jsxDEV(Route, {\n          path: \"/login\",\n          element: /*#__PURE__*/_jsxDEV(LoginPage, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 614,\n            columnNumber: 41\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 614,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Route, {\n          path: \"/home\",\n          element: /*#__PURE__*/_jsxDEV(ProtectedRoute, {\n            children: /*#__PURE__*/_jsxDEV(HomePage, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 615,\n              columnNumber: 56\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 615,\n            columnNumber: 40\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 615,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Route, {\n          path: \"/courses\",\n          element: /*#__PURE__*/_jsxDEV(ProtectedRoute, {\n            children: /*#__PURE__*/_jsxDEV(CourseList, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 616,\n              columnNumber: 59\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 616,\n            columnNumber: 43\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 616,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Route, {\n          path: \"/create\",\n          element: /*#__PURE__*/_jsxDEV(ProtectedRoute, {\n            children: /*#__PURE__*/_jsxDEV(CreateCourse, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 617,\n              columnNumber: 58\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 617,\n            columnNumber: 42\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 617,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Route, {\n          path: \"/edit/:id\",\n          element: /*#__PURE__*/_jsxDEV(ProtectedRoute, {\n            children: /*#__PURE__*/_jsxDEV(EditCourse, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 618,\n              columnNumber: 60\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 618,\n            columnNumber: 44\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 618,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Route, {\n          path: \"*\",\n          element: /*#__PURE__*/_jsxDEV(Navigate, {\n            to: \"/home\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 619,\n            columnNumber: 36\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 619,\n          columnNumber: 11\n        }, this), \" \"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 613,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 612,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 611,\n    columnNumber: 5\n  }, this);\n}\n_c11 = App;\nvar _c, _c2, _c3, _c4, _c5, _c6, _c7, _c8, _c9, _c10, _c11;\n$RefreshReg$(_c, \"UserProvider\");\n$RefreshReg$(_c2, \"ProtectedRoute\");\n$RefreshReg$(_c3, \"LoginPage\");\n$RefreshReg$(_c4, \"HomePage\");\n$RefreshReg$(_c5, \"AssessmentItem\");\n$RefreshReg$(_c6, \"WeightSection\");\n$RefreshReg$(_c7, \"CourseItem\");\n$RefreshReg$(_c8, \"CourseList\");\n$RefreshReg$(_c9, \"CreateCourse\");\n$RefreshReg$(_c10, \"EditCourse\");\n$RefreshReg$(_c11, \"App\");","map":{"version":3,"names":["React","useState","useEffect","createContext","useContext","useCallback","useRef","useMemo","BrowserRouter","Routes","Route","Navigate","useNavigate","useParams","axios","motion","AnimatePresence","ChevronDown","ChevronUp","WeightEditor","AssessmentList","calculateSectionAverage","calculateOverallGrade","getGradeColor","jsPDF","TranscriptDownloader","jsxDEV","_jsxDEV","UserContext","UserProvider","children","_s","userId","setUserId","stored","localStorage","getItem","setItem","updateUser","id","Provider","value","fileName","_jsxFileName","lineNumber","columnNumber","_c","ProtectedRoute","_s2","to","_c2","api","create","baseURL","process","env","REACT_APP_API_BASE","headers","LoginPage","_s3","u","setU","p","setP","err","setErr","nav","submit","e","preventDefault","className","style","maxWidth","onSubmit","onChange","target","required","type","_c3","HomePage","_s4","isLoading","setIsLoading","error","setError","handleDownloadTranscript","console","log","response","get","toString","responseType","data","size","Error","blob","Blob","url","window","URL","createObjectURL","link","document","createElement","href","setAttribute","body","appendChild","click","revokeObjectURL","removeChild","message","onClick","disabled","_c4","AssessmentItem","a","AssessmentName","IndividualGrade","_c5","WeightSection","courseId","weightId","weightPercentage","assessmentType","assessments","onWeightUpdate","_s5","editing","setEditing","currentWeight","setCurrentWeight","loading","setLoading","lastRefreshTime","sectionAverage","avg","isNaN","handleWeightUpdate","newWeight","now","Date","current","event","CustomEvent","detail","dispatchEvent","courseListEvent","handleAssessmentChange","handleSave","toFixed","onSave","onCancel","div","initial","height","opacity","animate","exit","onAssessmentChange","_c6","CourseItem","c","onDelete","onEdit","_s6","open","setOpen","setAssessments","weights","setWeights","fetchRef","initialFetchDone","setInitialFetchDone","fetchAssessments","CourseID","courseName","CourseName","assessmentsResponse","assessmentCount","length","weightsResponse","weightCount","handleRefresh","preserveOpenState","addEventListener","removeEventListener","groupedAssessments","groups","forEach","assessment","WeightID","weight","find","w","weightType","AssessmentType","WeightPercentage","push","Object","values","overallGrade","OverallGrade","mappedWeights","map","courseData","calculatedGrade","result","previousGrade","newGrade","percentage","gradeColorClass","o","Instructor","UserID","g","i","_c7","CourseList","_s7","courses","setCourses","sem","setSem","yr","setYr","openSem","setOpenSem","openYr","setOpenYr","fetch","qs","join","then","r","handleRefreshCourseList","unique","field","all","Array","from","Set","s","y","delete","_c8","CreateCourse","_s8","form","setForm","Semester","Year","CreditHours","change","f","name","post","UserId","_c9","EditCourse","_s9","finally","put","_c10","App","path","element","_c11","$RefreshReg$"],"sources":["C:/Users/Brendon Nguyen/Desktop/T10Code/Team10/GradeView_Course/frontend/src/App.jsx"],"sourcesContent":["// src/App.js\r\nimport React, { useState, useEffect, createContext, useContext, useCallback, useRef, useMemo } from 'react';\r\nimport { BrowserRouter, Routes, Route, Navigate, useNavigate, useParams } from 'react-router-dom';\r\nimport axios from 'axios';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport { ChevronDown, ChevronUp } from 'lucide-react';\r\nimport WeightEditor from './components/WeightEditor';\r\nimport AssessmentList from './components/AssessmentList';\r\nimport { calculateSectionAverage, calculateOverallGrade, getGradeColor } from './utils/gradeCalculations';\r\nimport { jsPDF } from \"jspdf\";\r\nimport TranscriptDownloader from './components/TranscriptDownloader';\r\n\r\n/* ------------ Context & ProtectedRoute ------------ */\r\nexport const UserContext = createContext(null);\r\nconst UserProvider = ({ children }) => {\r\n  const [userId, setUserId] = useState(1); // Default to user ID 1\r\n  useEffect(() => {\r\n    const stored = localStorage.getItem('userId');\r\n    if (stored) setUserId(+stored);\r\n    else {\r\n      // Set default user ID to 1 and store in localStorage\r\n      localStorage.setItem('userId', 1);\r\n    }\r\n  }, []);\r\n  const updateUser = id => {\r\n    localStorage.setItem('userId', id);\r\n    setUserId(id);\r\n  };\r\n  return <UserContext.Provider value={{ userId, updateUser }}>{children}</UserContext.Provider>;\r\n};\r\nconst ProtectedRoute = ({ children }) => {\r\n  const { userId } = useContext(UserContext);\r\n  return userId ? children : <Navigate to=\"/login\" />;\r\n};\r\n\r\n/* ------------ API Helper ------------ */\r\nexport const api = axios.create({\r\n  baseURL: process.env.REACT_APP_API_BASE || 'http://localhost:5000',\r\n  headers: { 'Content-Type': 'application/json' }\r\n});\r\n\r\n/* ------------ Login Page ------------ */\r\nfunction LoginPage() {\r\n  const [u, setU] = useState(''), [p, setP] = useState(''), [err, setErr] = useState('');\r\n  const { updateUser } = useContext(UserContext);\r\n  const nav = useNavigate();\r\n  const submit = e => {\r\n    e.preventDefault();\r\n    if (u === 'testuser' && p === 'password') {\r\n      updateUser(1);\r\n      nav('/home');\r\n    } else {\r\n      setErr('Invalid username or password');\r\n    }\r\n  };\r\n  return (\r\n    <div className=\"container mt-5\">\r\n      <div className=\"card mx-auto\" style={{ maxWidth: 400 }}>\r\n        <div className=\"card-body\">\r\n          <h2 className=\"card-title text-center\">Login</h2>\r\n          {err && <div className=\"alert alert-danger\">{err}</div>}\r\n          <form onSubmit={submit}>\r\n            <div className=\"mb-3\">\r\n              <label className=\"form-label\">Username</label>\r\n              <input value={u} onChange={e => setU(e.target.value)} className=\"form-control\" required />\r\n            </div>\r\n            <div className=\"mb-3\">\r\n              <label className=\"form-label\">Password</label>\r\n              <input type=\"password\" value={p} onChange={e => setP(e.target.value)} className=\"form-control\" required />\r\n            </div>\r\n            <button type=\"submit\" className=\"btn btn-primary w-100\">Login</button>\r\n          </form>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n/* ------------ Home Page ------------ */\r\nfunction HomePage() {\r\n  const nav = useNavigate();\r\n  const { userId } = useContext(UserContext);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [error, setError] = useState(null);\r\n  \r\n  const handleDownloadTranscript = async () => {\r\n    setIsLoading(true);\r\n    setError(null);\r\n    \r\n    try {\r\n      console.log(\"Attempting to download transcript for user:\", userId);\r\n      \r\n      // Request the PDF from the backend\r\n      const response = await api.get(`/api/users/${userId}/generate-transcript`, {\r\n        headers: { \r\n          'x-user-id': userId.toString() // Ensure userId is a string\r\n        },\r\n        responseType: 'blob' // Important: This tells axios to handle the response as a binary blob\r\n      });\r\n      \r\n      // Check if we got a valid response\r\n      if (!response.data || response.data.size === 0) {\r\n        throw new Error(\"Received empty PDF data\");\r\n      }\r\n      \r\n      // Create a URL for the blob\r\n      const blob = new Blob([response.data], { type: 'application/pdf' });\r\n      const url = window.URL.createObjectURL(blob);\r\n      \r\n      // Create a link and trigger download\r\n      const link = document.createElement('a');\r\n      link.href = url;\r\n      link.setAttribute('download', `transcript_user_${userId}.pdf`);\r\n      document.body.appendChild(link);\r\n      link.click();\r\n      \r\n      // Clean up\r\n      window.URL.revokeObjectURL(url);\r\n      document.body.removeChild(link);\r\n    } catch (err) {\r\n      console.error('Error downloading transcript:', err);\r\n      setError(`Failed to download transcri: ${err.message || 'Please try again later.'}`);\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"container mt-5 text-center\">\r\n      <h1>Welcome to GradeView</h1>\r\n      <div className=\"d-flex justify-content-center gap-3\">\r\n        <button className=\"btn btn-primary m-2\" onClick={()=>nav('/courses')}>View Courses</button>\r\n        <button \r\n          className=\"btn btn-success m-2\" \r\n          onClick={handleDownloadTranscript}\r\n          disabled={isLoading}\r\n        >\r\n          {isLoading ? 'Generating PDF...' : 'Download Transcript'}\r\n        </button>\r\n      </div>\r\n      {error && (\r\n        <div className=\"alert alert-danger mt-2\">{error}</div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\n/* ------------ Course Listing & Details ------------ */\r\nconst AssessmentItem = ({ a }) => (\r\n  <div className=\"assessment-item\">\r\n    <span>{a.AssessmentName}:</span>\r\n    <span>{a.IndividualGrade!=null?`${a.IndividualGrade}%`:'N/A'}</span>\r\n  </div>\r\n);\r\nconst WeightSection = ({ courseId, weightId, weightPercentage, assessmentType, assessments = [], onWeightUpdate }) => {\r\n  const { userId } = useContext(UserContext);\r\n  const [editing, setEditing] = useState(false);\r\n  const [currentWeight, setCurrentWeight] = useState(weightPercentage);\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState('');\r\n  const lastRefreshTime = useRef(0);\r\n\r\n  // Update currentWeight when weightPercentage prop changes\r\n  useEffect(() => {\r\n    console.log('WeightSection: weightPercentage prop changed', { \r\n      courseId, \r\n      weightId, \r\n      assessmentType, \r\n      weightPercentage \r\n    });\r\n    setCurrentWeight(weightPercentage);\r\n  }, [weightPercentage, courseId, weightId, assessmentType]);\r\n\r\n  // Calculate section average\r\n  const sectionAverage = useMemo(() => {\r\n    const avg = calculateSectionAverage(assessments);\r\n    // Ensure the result is a number\r\n    return isNaN(avg) ? 0 : avg;\r\n  }, [assessments]);\r\n\r\n  const handleWeightUpdate = async (newWeight) => {\r\n    setCurrentWeight(newWeight);\r\n    onWeightUpdate(newWeight);\r\n    \r\n    // Trigger a refresh of the course data\r\n    const now = Date.now();\r\n    if (now - lastRefreshTime.current > 1000) {\r\n      lastRefreshTime.current = now;\r\n      const event = new CustomEvent('refreshCourse', { \r\n        detail: { courseId } \r\n      });\r\n      window.dispatchEvent(event);\r\n      \r\n      // Also trigger a refresh of the course list to update the overall grade\r\n      const courseListEvent = new CustomEvent('refreshCourseList');\r\n      window.dispatchEvent(courseListEvent);\r\n    }\r\n  };\r\n\r\n  const handleAssessmentChange = () => {\r\n    // Only refresh if it's been more than 1 second since the last refresh\r\n    const now = Date.now();\r\n    if (now - lastRefreshTime.current > 1000) {\r\n      lastRefreshTime.current = now;\r\n      const event = new CustomEvent('refreshCourse', { \r\n        detail: { courseId } \r\n      });\r\n      window.dispatchEvent(event);\r\n      \r\n      // Also trigger a refresh of the course list to update the overall grade\r\n      const courseListEvent = new CustomEvent('refreshCourseList');\r\n      window.dispatchEvent(courseListEvent);\r\n    }\r\n  };\r\n\r\n  const handleSave = async () => {\r\n    // Don't close the editor after saving\r\n    // This allows the user to see the updated weight and continue editing if needed\r\n  };\r\n\r\n  return (\r\n    <div className=\"weight-section\">\r\n      <div className=\"weight-header\" onClick={() => !editing && setEditing(true)}>\r\n        <div className=\"weight-info\">\r\n          <span className=\"weight-type\">{assessmentType}</span>\r\n          <span className=\"weight-percentage\">({currentWeight}%)</span>\r\n          <span className=\"section-average\">Average: {typeof sectionAverage === 'number' ? sectionAverage.toFixed(1) : '0.0'}%</span>\r\n        </div>\r\n        <div className=\"weight-actions\">\r\n          <button className=\"edit-weight-button\" onClick={() => setEditing(true)}>\r\n            Edit\r\n          </button>\r\n        </div>\r\n      </div>\r\n      \r\n      {editing && (\r\n        <WeightEditor\r\n          courseId={courseId}\r\n          weightId={weightId}\r\n          assessmentType={assessmentType}\r\n          weightPercentage={currentWeight}\r\n          onSave={handleSave}\r\n          onCancel={() => setEditing(false)}\r\n          onWeightUpdate={handleWeightUpdate}\r\n        />\r\n      )}\r\n      \r\n      <AnimatePresence>\r\n        {editing && (\r\n          <motion.div \r\n            initial={{height:0,opacity:0}} \r\n            animate={{height:'auto',opacity:1}} \r\n            exit={{height:0,opacity:0}} \r\n            className=\"assessment-list\"\r\n          >\r\n            <AssessmentList\r\n              courseId={courseId}\r\n              weightId={weightId}\r\n              assessmentType={assessmentType}\r\n              assessments={assessments}\r\n              onAssessmentChange={handleAssessmentChange}\r\n            />\r\n          </motion.div>\r\n        )}\r\n      </AnimatePresence>\r\n    </div>\r\n  );\r\n};\r\nconst CourseItem = ({ c, onDelete, onEdit }) => {\r\n  const [open, setOpen] = useState(false);\r\n  const [assessments, setAssessments] = useState([]);\r\n  const [weights, setWeights] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState('');\r\n  const { userId } = useContext(UserContext);\r\n  const fetchRef = useRef();\r\n  const [initialFetchDone, setInitialFetchDone] = useState(false);\r\n\r\n  const fetchAssessments = useCallback(async () => {\r\n    setLoading(true);\r\n    try {\r\n      // Fetch assessments\r\n      console.log('CourseItem: Fetching assessments', { \r\n        courseId: c.CourseID, \r\n        courseName: c.CourseName \r\n      });\r\n      const assessmentsResponse = await api.get(`/api/courses/${c.CourseID}/assessments`, {\r\n        headers: { 'x-user-id': userId }\r\n      });\r\n      console.log('CourseItem: Assessments fetched', { \r\n        courseId: c.CourseID, \r\n        courseName: c.CourseName,\r\n        assessmentCount: assessmentsResponse.data.length\r\n      });\r\n      setAssessments(assessmentsResponse.data);\r\n      \r\n      // Fetch weights\r\n      console.log('CourseItem: Fetching weights', { \r\n        courseId: c.CourseID, \r\n        courseName: c.CourseName \r\n      });\r\n      const weightsResponse = await api.get(`/api/courses/${c.CourseID}/weights`, {\r\n        headers: { 'x-user-id': userId }\r\n      });\r\n      console.log('CourseItem: Weights fetched', { \r\n        courseId: c.CourseID, \r\n        courseName: c.CourseName,\r\n        weightCount: weightsResponse.data.length,\r\n        weights: weightsResponse.data\r\n      });\r\n      setWeights(weightsResponse.data);\r\n      \r\n      setError('');\r\n    } catch (err) {\r\n      console.error('Error fetching course data:', err);\r\n      setError('Failed to load course data');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, [c.CourseID, userId]);\r\n\r\n  // Store the fetch function in a ref\r\n  useEffect(() => {\r\n    fetchRef.current = fetchAssessments;\r\n  }, [fetchAssessments]);\r\n\r\n  // Initial fetch when component mounts\r\n  useEffect(() => {\r\n    if (!initialFetchDone) {\r\n      console.log('CourseItem: Initial fetch', { \r\n        courseId: c.CourseID, \r\n        courseName: c.CourseName \r\n      });\r\n      fetchAssessments();\r\n      setInitialFetchDone(true);\r\n    }\r\n  }, [fetchAssessments, initialFetchDone, c.CourseID, c.CourseName]);\r\n\r\n  // Add event listener for course refresh\r\n  useEffect(() => {\r\n    const handleRefresh = (event) => {\r\n      if (event.detail.courseId === c.CourseID) {\r\n        console.log('Course refresh event received:', {\r\n          courseId: c.CourseID,\r\n          preserveOpenState: event.detail.preserveOpenState\r\n        });\r\n        \r\n        // Only fetch assessments if the course is open or if preserveOpenState is true\r\n        if (open || event.detail.preserveOpenState) {\r\n          fetchAssessments();\r\n        }\r\n      }\r\n    };\r\n\r\n    window.addEventListener('refreshCourse', handleRefresh);\r\n    return () => window.removeEventListener('refreshCourse', handleRefresh);\r\n  }, [c.CourseID, open]);\r\n\r\n  // Group assessments by weight type\r\n  const groupedAssessments = useMemo(() => {\r\n    const groups = {};\r\n    assessments.forEach(assessment => {\r\n      if (!groups[assessment.WeightID]) {\r\n        // Find the corresponding weight from the weights array\r\n        const weight = weights.find(w => w.id === assessment.WeightID);\r\n        \r\n        groups[assessment.WeightID] = {\r\n          weightType: weight ? weight.assessmentType : assessment.AssessmentType,\r\n          weightPercentage: weight ? weight.currentWeight : assessment.WeightPercentage,\r\n          weightId: assessment.WeightID,\r\n          courseId: c.CourseID,\r\n          assessments: []\r\n        };\r\n      }\r\n      groups[assessment.WeightID].assessments.push(assessment);\r\n    });\r\n    return Object.values(groups);\r\n  }, [assessments, weights, c.CourseID]);\r\n\r\n  // Calculate overall grade\r\n  const overallGrade = useMemo(() => {\r\n    if (weights.length === 0 || assessments.length === 0) return c.OverallGrade || 0;\r\n    \r\n    // Map the weights to the expected format\r\n    const mappedWeights = weights.map(w => ({\r\n      WeightID: w.id,\r\n      AssessmentType: w.assessmentType,\r\n      WeightPercentage: w.currentWeight\r\n    }));\r\n    \r\n    const courseData = {\r\n      weights: mappedWeights,\r\n      assessments\r\n    };\r\n    \r\n    const calculatedGrade = calculateOverallGrade(courseData);\r\n    // Ensure the result is a number\r\n    const result = isNaN(calculatedGrade) ? 0 : calculatedGrade;\r\n    \r\n    // Log the grade change\r\n    console.log(`Course ${c.CourseName} (ID: ${c.CourseID}) grade updated:`, {\r\n      previousGrade: c.OverallGrade || 0,\r\n      newGrade: result,\r\n      weights: mappedWeights.map(w => ({ type: w.AssessmentType, percentage: w.WeightPercentage })),\r\n      assessmentCount: assessments.length\r\n    });\r\n    \r\n    return result;\r\n  }, [weights, assessments, c.OverallGrade, c.CourseID, c.CourseName]);\r\n\r\n  // Get grade color\r\n  const gradeColorClass = useMemo(() => {\r\n    return getGradeColor(overallGrade);\r\n  }, [overallGrade]);\r\n\r\n  return (\r\n    <div className=\"course-item\" data-course-id={c.CourseID}>\r\n      <div className=\"course-header\">\r\n        <div className=\"course-details\" onClick={() => setOpen(o => !o)}>\r\n          <div className=\"course-name\">{c.CourseName}</div>\r\n          <div className=\"instructor\">{c.Instructor}</div>\r\n        </div>\r\n        <div className=\"header-actions\">\r\n          <button className=\"edit-button\" onClick={() => onEdit(c.CourseID)}>Edit</button>\r\n          <button className=\"delete-button\" onClick={() => onDelete(c.UserID, c.CourseID)}>Delete</button>\r\n        </div>\r\n        <div className={`grade ${gradeColorClass}`}>\r\n          {typeof overallGrade === 'number' ? overallGrade.toFixed(1) : '0.0'}\r\n        </div>\r\n        {open ? <ChevronUp onClick={() => setOpen(false)} /> : <ChevronDown onClick={() => setOpen(true)} />}\r\n      </div>\r\n      <AnimatePresence>\r\n        {open && (\r\n          <motion.div \r\n            initial={{height:0,opacity:0}} \r\n            animate={{height:'auto',opacity:1}} \r\n            exit={{height:0,opacity:0}} \r\n            className=\"course-dropdown\"\r\n          >\r\n            {loading ? (\r\n              <div>Loading...</div>\r\n            ) : groupedAssessments.length > 0 ? (\r\n              groupedAssessments.map((g, i) => (\r\n                <WeightSection \r\n                  key={i} \r\n                  courseId={g.courseId} \r\n                  weightId={g.weightId} \r\n                  weightPercentage={g.weightPercentage} \r\n                  assessmentType={g.weightType} \r\n                  assessments={g.assessments} \r\n                  onWeightUpdate={(newWeight) => {\r\n                    // Dispatch a refresh event to update the course data\r\n                    const event = new CustomEvent('refreshCourse', { \r\n                      detail: { courseId: g.courseId } \r\n                    });\r\n                    window.dispatchEvent(event);\r\n                  }}\r\n                />\r\n              ))\r\n            ) : (\r\n              <div>No assessments.</div>\r\n            )}\r\n          </motion.div>\r\n        )}\r\n      </AnimatePresence>\r\n    </div>\r\n  );\r\n};\r\nfunction CourseList() {\r\n  const [courses, setCourses] = useState([]);\r\n  const [sem, setSem] = useState('All'), [yr,setYr]=useState('All');\r\n  const [openSem, setOpenSem] = useState(false), [openYr,setOpenYr]=useState(false);\r\n  const { userId } = useContext(UserContext);\r\n  const nav = useNavigate();\r\n  const fetch = () => {\r\n    const qs = [];\r\n    if (sem!=='All') qs.push(`semester=${sem}`);\r\n    if (yr!=='All') qs.push(`year=${yr}`);\r\n    if (userId) qs.push(`userId=${userId}`);\r\n    \r\n    console.log('Fetching course data...');\r\n    \r\n    api.get(`/${qs.length?`?${qs.join('&')}`:''}`)\r\n       .then(r => {\r\n         console.log('Course data fetched:', r.data.map(c => ({\r\n           courseId: c.CourseID,\r\n           courseName: c.CourseName,\r\n           overallGrade: c.OverallGrade\r\n         })));\r\n         setCourses(r.data);\r\n       });\r\n  };\r\n  useEffect(fetch, [sem,yr,userId]);\r\n  \r\n  // Add event listener for refreshCourseList event\r\n  useEffect(() => {\r\n    const handleRefreshCourseList = () => {\r\n      console.log('refreshCourseList event received, refreshing course data');\r\n      fetch();\r\n    };\r\n    \r\n    window.addEventListener('refreshCourseList', handleRefreshCourseList);\r\n    return () => window.removeEventListener('refreshCourseList', handleRefreshCourseList);\r\n  }, []);\r\n  \r\n  const unique = (field, all) => ['All', ...Array.from(new Set(all.map(c=>c[field])))] ;\r\n  return (\r\n    <div className=\"course-container\">\r\n      <div className=\"header\">\r\n        <div className={`semester-dropdown ${openSem?'open':''}`}>\r\n          <button className=\"semester-button\" onClick={()=>setOpenSem(o=>!o)}>{sem} v</button>\r\n          {openSem && <div className=\"dropdown-content\">\r\n            {unique('Semester',courses).map(s=><button key={s} className={s===sem?'active':''} onClick={()=>{setSem(s);setOpenSem(false);}}>{s}</button>)}\r\n          </div>}\r\n        </div>\r\n        <div className={`semester-download ${openYr?'open':''}`}>\r\n          <button className=\"download-button\" onClick={()=>setOpenYr(o=>!o)}>{yr} v</button>\r\n          {openYr && <div className=\"dropdown-content\">\r\n            {unique('Year',courses).map(y=><button key={y} className={y===yr?'active':''} onClick={()=>{setYr(y);setOpenYr(false);}}>{y}</button>)}\r\n          </div>}\r\n        </div>\r\n        <button className=\"add-button\" onClick={()=>nav('/create')}>Add Course</button>\r\n      </div>\r\n      <div className=\"course-list\">\r\n        {courses.map(c=>(\r\n          <CourseItem key={c.CourseID} c={c} \r\n            onDelete={(u,id)=>api.delete(`/course/${id}`,{data:{UserID:userId}}).then(fetch)}\r\n            onEdit={id=>nav(`/edit/${id}`)}\r\n          />\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n/* ------------ Create & Edit Pages ------------ */\r\nfunction CreateCourse() {\r\n  const [form, setForm] = useState({ CourseName:'',Instructor:'',Semester:'',Year:'',CreditHours:'' });\r\n  const { userId } = useContext(UserContext);\r\n  const nav = useNavigate();\r\n  const change = e => setForm(f=>({ ...f, [e.target.name]: e.target.value }));\r\n  const submit = e => {\r\n    e.preventDefault();\r\n    api.post('/course', { ...form, UserId: userId }).then(()=>nav('/courses'));\r\n  };\r\n  return (\r\n    <div className=\"container mt-5\">\r\n      <h2>Create Course</h2>\r\n      <form onSubmit={submit}>\r\n        {['CourseName','Instructor','Semester','Year','CreditHours'].map(field=>(\r\n          <div className=\"mb-3\" key={field}>\r\n            <label className=\"form-label\">{field}</label>\r\n            <input \r\n              name={field} \r\n              type={field==='CreditHours'?'number':'text'} \r\n              className=\"form-control\" \r\n              value={form[field]} \r\n              onChange={change} required \r\n            />\r\n          </div>\r\n        ))}\r\n        <button className=\"btn btn-primary\">Create</button>\r\n        <button type=\"button\" className=\"btn btn-secondary ms-2\" onClick={()=>nav('/courses')}>Cancel</button>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\nfunction EditCourse() {\r\n  const { id } = useParams();\r\n  const { userId } = useContext(UserContext);\r\n  const [form, setForm] = useState({});\r\n  const [loading, setLoading] = useState(true);\r\n  const nav = useNavigate();\r\n  useEffect(()=>{\r\n    api.get(`/course/${id}?userId=${userId}`)\r\n       .then(r=>setForm(r.data))\r\n       .finally(()=>setLoading(false));\r\n  },[id,userId]);\r\n  const change = e => setForm(f=>({ ...f, [e.target.name]: e.target.value }));\r\n  const submit = e => {\r\n    e.preventDefault();\r\n    api.put(`/course/${id}`, { ...form, UserID: userId }).then(()=>nav('/courses'));\r\n  };\r\n  if (loading) return <div>Loading...</div>;\r\n  return (\r\n    <div className=\"container mt-5\">\r\n      <h2>Edit Course</h2>\r\n      <form onSubmit={submit}>\r\n        {['CourseName','Instructor','Semester','Year','CreditHours'].map(field=>(\r\n          <div className=\"mb-3\" key={field}>\r\n            <label className=\"form-label\">{field}</label>\r\n            <input \r\n              name={field} \r\n              type={field==='CreditHours'?'number':'text'} \r\n              className=\"form-control\" \r\n              value={form[field]||''} \r\n              onChange={change} required \r\n            />\r\n          </div>\r\n        ))}\r\n        <button className=\"btn btn-primary\">Save</button>\r\n        <button type=\"button\" className=\"btn btn-secondary ms-2\" onClick={()=>nav('/courses')}>Cancel</button>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n\r\n/* ------------ App & Routing ------------ */\r\nexport default function App() {\r\n  return (\r\n    <UserProvider>\r\n      <BrowserRouter>\r\n        <Routes>\r\n          <Route path=\"/login\" element={<LoginPage />} />\r\n          <Route path=\"/home\" element={<ProtectedRoute><HomePage/></ProtectedRoute>} />\r\n          <Route path=\"/courses\" element={<ProtectedRoute><CourseList/></ProtectedRoute>} />\r\n          <Route path=\"/create\" element={<ProtectedRoute><CreateCourse/></ProtectedRoute>} />\r\n          <Route path=\"/edit/:id\" element={<ProtectedRoute><EditCourse/></ProtectedRoute>} />\r\n          <Route path=\"*\" element={<Navigate to=\"/home\" />} /> {/* Changed redirect from /login to /home */}\r\n        </Routes>\r\n      </BrowserRouter>\r\n    </UserProvider>\r\n  );\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}